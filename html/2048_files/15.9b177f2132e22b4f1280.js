(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"0Pmw":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("gFDQ"),o=n("pKSW"),s=n("TYT/"),c=function(){function e(e){this.logger=e,this.DiscussionCommentBadge=o.a,this.logger.debug(this.constructor.name+" is created.")}return Object.defineProperty(e.prototype,"cssClass",{get:function(){return o.a.getCssClass(this.badge)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.displayName=o.a.getDisplayName(this.badge)},e.\u0275fac=function(t){return new(t||e)(s.Qb(i.a))},e.\u0275cmp=s.Kb({type:e,selectors:[["jr-comment-badge"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Eb(t.cssClass)},inputs:{badge:"badge"},decls:1,vars:1,template:function(e,t){1&e&&s.Yc(0),2&e&&s.Zc(t.displayName)},styles:["[_nghost-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding:0 9px;height:15px;line-height:16px;font-size:9px;font-weight:600;color:#fff;letter-spacing:.25px;text-transform:uppercase;background:grey;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;border-radius:8px}.moderator[_nghost-%COMP%]{background:#1d95e4}.expert[_nghost-%COMP%]{background:#ff5a60}.legend[_nghost-%COMP%], .master[_nghost-%COMP%], .mentor[_nghost-%COMP%]{background:#7959b7}"],changeDetection:0}),e}()},"12JI":function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("mrSG"),o=n("9fSo"),s=n("TcM7"),c=n("MiBj"),a=n("I7SJ"),r=n("gFDQ"),m=n("Dy+N"),u=n("hDTF"),l=n("VNr4"),d=n("F/XL"),b=n("G5J1"),h=n("15JJ"),f=n("9Z1F"),p=n("xMyE"),g=n("67Y/"),C=n("3P9I"),v=n("zFH7"),O=n("LYuz"),y=n("U+74"),S=n("VJAp"),_=n("TYT/"),M=function(){function e(e,t,n,i,o,s){this.logger=e,this.meProfileService=t,this.discussionBackendClient=n,this.discussionService=i,this.discussionExceptionService=o,this.commentsService=s,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.changeLikeStatus=function(e,t,n){var o=this;if(t){var s=n===c.a.SOLUTION||n===c.a.HELPFUL;return this.changeLikeStatusOfComment(e,t,n,s).pipe(Object(h.a)((function(e){return Object(l.a)(Object(d.a)(e),s?o.commentsService.reloadComment(t):Object(d.a)(null))})),Object(f.a)((function(e){return o.discussionExceptionService.handleRequestErrorInfo(e,S.a.getTranslation("discussionNotificationErrorUpdateComment")),b.a})),Object(p.a)((function(e){var n=Object(i.f)(e,2)[1];n&&(t.update(n),o.logger.info(S.a.getTranslation("discussionNotificationSuccessUpdatedComment"),n))})),Object(g.a)((function(e){return Object(i.f)(e,2)[0]})))}return this.changeLikeStatusOfDiscussion(e,n)},e.prototype.getSuitableLikeStatuses=function(e,t,n){switch(e){case o.a.QUESTION:return this.getLikeStatusesForQuestions(t,n);case o.a.FORUM_QUESTION:return this.getLikeStatusesForForumQuestions(t,n);case o.a.POST:return this.getLikeStatusesForGroups(t,n);case o.a.LECTURE:return this.getLikeStatusesForLectures(t,n);case o.a.TASK:case o.a.QUIZ:return this.getLikeStatusesForTasks(t,n);case o.a.QUEST:return this.getLikeStatusesForQuests(t,n);case o.a.STORY:return this.getLikeStatusesForSuccessStories(t,n);default:return this.getDefaultLikeStatuses(t,n)}},e.prototype.updateBookmarksEntityStatus=function(e,t){return e?this.discussionBackendClient.updateBookmarksCommentStatus(e.id):this.discussionBackendClient.updateBookmarksDiscussionStatus(t.id)},e.prototype.changeLikeStatusOfDiscussion=function(e,t,n){var i=this;void 0===n&&(n=!1);var o=new a.a;return o.status=t,this.discussionBackendClient.voteDiscussion(e.id,o).pipe(Object(p.a)((function(e){i.logger.info(S.a.getTranslation("discussionNotificationSuccessVoted"),e)})),Object(f.a)((function(e){return i.discussionExceptionService.handleRequestErrorInfo(e,S.a.getTranslation("discussionNotificationErrorVoting")),b.a})))},e.prototype.changeLikeStatusOfComment=function(e,t,n,i){var s=this;void 0===i&&(i=!1);var r=new a.a;return r.status=n,this.discussionBackendClient.voteComment(e.id,t.id,r).pipe(Object(p.a)((function(t){s.logger.info(S.a.getTranslation("discussionNotificationSuccessChangeRating"),t),e.type===o.a.QUESTION&&n===c.a.SOLUTION&&Object(l.a)(s.meProfileService.isUserModerator(),s.discussionService.isMeOwnerOfQuestionTopic()).subscribe((function(e){(e[0]||e[1])&&(s.discussionService.getDiscussionTopicInfo().status=u.a.SOLVED)}))})),Object(f.a)((function(e){return s.discussionExceptionService.handleRequestErrorInfo(e,S.a.getTranslation("discussionNotificationErrorChangeRating")),b.a})))},e.prototype.getLikeStatusesForQuestions=function(e,t){var n=[];return t?e?(n.push(c.a.SOLUTION),n.push(c.a.HELPFUL),n.push(c.a.ARTICLE),n.push(c.a.HOT),n.push(c.a.FOLLOW),n.push(c.a.FAVORITE)):(n.push(s.a.WRONG),n.push(s.a.DIRTY),n.push(s.a.OUTDATED),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?(n.push(c.a.HOT),n.push(c.a.FOLLOW),n.push(c.a.FAVORITE)):(n.push(s.a.DUPLICATE),n.push(s.a.DIRTY),n.push(s.a.OUTDATED),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL),n.push(s.a.AWFUL)),n},e.prototype.getLikeStatusesForForumQuestions=function(e,t){var n=[];return t?e?(n.push(c.a.SOLUTION),n.push(c.a.HELPFUL),n.push(c.a.ARTICLE),n.push(c.a.HOT),n.push(c.a.FOLLOW),n.push(c.a.FAVORITE)):(n.push(s.a.WRONG),n.push(s.a.DIRTY),n.push(s.a.OUTDATED),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?(n.push(c.a.HOT),n.push(c.a.FOLLOW),n.push(c.a.FAVORITE)):(n.push(s.a.DUPLICATE),n.push(s.a.DIRTY),n.push(s.a.OUTDATED),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL),n.push(s.a.AWFUL)),n},e.prototype.getLikeStatusesForGroups=function(e,t){var n=[];return t?e?(n.push(c.a.HOT),n.push(c.a.FOLLOW),n.push(c.a.FAVORITE),n.push(c.a.ARTICLE)):(n.push(s.a.TROLLING),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?(n.push(c.a.HOT),n.push(c.a.FOLLOW),n.push(c.a.FAVORITE),n.push(c.a.OSCAR)):(n.push(s.a.OFFTOPIC),n.push(s.a.DIRTY),n.push(s.a.OUTDATED),n.push(s.a.FAKE),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL),n.push(s.a.AWFUL)),n},e.prototype.getLikeStatusesForLectures=function(e,t){var n=[];return t?e?(n.push(c.a.HOT),n.push(c.a.FAVORITE),n.push(c.a.FOLLOW),n.push(c.a.ARTICLE)):(n.push(s.a.TROLLING),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?(n.push(c.a.HOT),n.push(c.a.FAVORITE)):(n.push(s.a.BORING),n.push(s.a.UNCLEAR),n.push(s.a.HARD),n.push(s.a.EASY),n.push(s.a.OUTDATED),n.push(s.a.AWFUL)),n},e.prototype.getLikeStatusesForTasks=function(e,t){var n=[];return t?e?(n.push(c.a.HOT),n.push(c.a.FAVORITE),n.push(c.a.FOLLOW),n.push(c.a.ARTICLE)):(n.push(s.a.TROLLING),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?(n.push(c.a.HOT),n.push(c.a.FAVORITE)):(n.push(s.a.BORING),n.push(s.a.UNCLEAR),n.push(s.a.HARD),n.push(s.a.EASY),n.push(s.a.AWFUL)),n},e.prototype.getLikeStatusesForQuests=function(e,t){var n=[];return t?e?(n.push(c.a.HOT),n.push(c.a.FAVORITE),n.push(c.a.FOLLOW),n.push(c.a.ARTICLE)):(n.push(s.a.TROLLING),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?n.push(c.a.HOT):(n.push(s.a.BORING),n.push(s.a.UNCLEAR),n.push(s.a.HARD),n.push(s.a.EASY),n.push(s.a.AWFUL)),n},e.prototype.getLikeStatusesForSuccessStories=function(e,t){var n=[];return t?e?(n.push(c.a.HOT),n.push(c.a.FAVORITE),n.push(c.a.FOLLOW),n.push(c.a.ARTICLE)):(n.push(s.a.TROLLING),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?(n.push(c.a.HOT),n.push(c.a.FAVORITE)):(n.push(s.a.BORING),n.push(s.a.SHAM),n.push(s.a.AWFUL)),n},e.prototype.getDefaultLikeStatuses=function(e,t){var n=[];return t?e?(n.push(c.a.HOT),n.push(c.a.FAVORITE),n.push(c.a.FOLLOW),n.push(c.a.ARTICLE)):(n.push(s.a.TROLLING),n.push(s.a.SPAM),n.push(s.a.ABUSE),n.push(s.a.FOUL)):e?n.push(c.a.HOT):(n.push(s.a.BORING),n.push(s.a.AWFUL)),n},e.\u0275fac=function(t){return new(t||e)(_.hc(r.a),_.hc(m.a),_.hc(v.a),_.hc(y.a),_.hc(O.a),_.hc(C.a))},e.\u0275prov=_.Mb({token:e,factory:e.\u0275fac}),e}()},"1Olq":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.LECTURE="lecture",e.TASK="task",e.POST="post",e.HELP="help",e.FORUM="forum",e.GROUP="group",e.GAME="game",e.USER_PROFILE="user profile",e.ABOUT="about",e.INTERNSHIP="internship",e}({})},"3P9I":function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var i=n("mrSG"),o=n("J4K4"),s=n("gFDQ"),c=n("Dy+N"),a=n("26FU"),r=n("K9Ia"),m=n("VNr4"),u=n("G5J1"),l=n("F/XL"),d=n("p0ib"),b=n("0/uQ"),h=n("ad02"),f=n("/PH2"),p=n("xMyE"),g=n("15JJ"),C=n("9Z1F"),v=n("67Y/"),O=n("psW0"),y=n("FFOo"),S=function(){function e(e,t,n,i){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=i}return e.prototype.call=function(e,t){return t.subscribe(new _(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),_=function(e){function t(t,n,i,o,s){var c=e.call(this,t)||this;return c.predicate=n,c.source=i,c.yieldIndex=o,c.thisArg=s,c.index=0,c}return i.c(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,i=this.index++;try{t.call(n||this,e,i,this.source)&&this.notifyComplete(this.yieldIndex?i:e)}catch(o){this.destination.error(o)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(y.a),M=n("oHtu"),T=n("s34m"),I=n("VbCB"),P=function(){return function(){}}(),E=function(){return function(e,t,n){this.message=e,this.parentCommentId=t,this.replyToUserId=n}}(),k=n("wbUM"),w=n("zFH7"),A=n("LYuz"),D=n("U+74"),L=n("FTVK"),R=n("VJAp"),N=n("+BlI"),x=n("idQx"),j=n("yKVs"),U=n("TYT/"),V=function(){function e(e,t,n,o,s,c,m,u){var l=this;this.logger=e,this.discussionExceptionService=t,this.toastService=n,this.discussionBackendClient=o,this.discussionService=s,this.meProfileService=c,this.dateTimeService=m,this.imageSizeSelectService=u,this.COMMENT_LENGTH_LIMIT=2e3,this.COMMENT_PROJECTION=null,this.commentsSource=new a.a(void 0),this.comments$=this.commentsSource.asObservable(),this.commentsCountSource=new a.a(void 0),this.commentsCount$=this.commentsCountSource.asObservable(),this.viewRequestSource=new a.a(void 0),this.viewRequest$=this.viewRequestSource.asObservable(),this.commentAddingSource=new r.a,this.commentDeletionSource=new r.a,this.replyDataSource=new r.a,this.replyData$=this.replyDataSource.asObservable(),this.editModeSource=new r.a,this.editMode$=this.editModeSource.asObservable(),this.webSocketUpdatedCountSource=new a.a(null),this.webSocketUpdatedCount$=this.webSocketUpdatedCountSource.asObservable(),this.isMoreAvailableSource=new r.a,this.isMoreAvailable$=this.isMoreAvailableSource.asObservable(),this.animationEnabledSource=new a.a(!1),this.animationEnabled$=this.animationEnabledSource.asObservable(),this.messagesReadSource=new a.a(void 0),this.messagesRead$=this.messagesReadSource.asObservable(),this.logger.debug(this.constructor.name+" is created."),this.commentAdding$=this.commentAddingSource.pipe(Object(h.a)((function(e,t){return e.id===t.id}))),this.commentAdding$.pipe(Object(f.a)(this.meProfileService.getCurrentMeProfile())).subscribe((function(e){var t=Object(i.f)(e,2);l.addCreatedCommentToTree(t[0],t[1])})),this.commentDeletion$=this.commentDeletionSource.pipe(Object(h.a)((function(e,t){return e.id===t.id}))),this.commentDeletion$.subscribe((function(e){return l.deleteCommentFromTree(e)}))}return e.prototype.initCommentLoad=function(e,t){var n=this;return e.limit||(e.limit=10),this.viewRequestSource.next(e),this.animationEnabledSource.next(!1),Object(m.a)(this.discussionBackendClient.loadComments(t.id,e,this.COMMENT_PROJECTION),this.meProfileService.getCurrentMeProfile()).pipe(Object(p.a)((function(e){var t=Object(i.f)(e,2),o=t[0],s=t[1];n.logger.info("Comments loaded",o),n.dateTimeService.updateRelativeDates();var c=o.map((function(e){return M.a.of(e,s)}));n.commentsSource.next(c)})),Object(g.a)((function(){return n.loadTopCommentsCount()})),Object(p.a)((function(e){n.topCommentsCount=e,n.updateMoreAvailableStatus(),setTimeout((function(){return n.animationEnabledSource.next(!0)}),1e3)})),Object(L.f)(),Object(C.a)((function(e){return n.discussionExceptionService.handleRequestErrorInfo(e,R.a.getTranslation("discussionNotificationErrorLoadingComments")),u.a})))},e.prototype.loadMoreComments=function(e){var t=this,n=this.commentsSource.getValue()[this.commentsSource.getValue().length-1],o=new I.a(this.viewRequestSource.getValue().order,10,n.time,n.id);return Object(m.a)(this.discussionBackendClient.loadComments(this.discussionService.getDiscussionInfo().id,o,this.COMMENT_PROJECTION),this.meProfileService.getCurrentMeProfile()).pipe(Object(v.a)((function(n){var o,s=Object(i.f)(n,2),c=s[0],a=s[1];t.logger.info("Comments loaded",c);var r=c.map((function(e){return M.a.of(e,a)}));if(e){var m=t.commentsSource.getValue().concat(r);t.commentsSource.next(m)}else(o=t.commentsSource.getValue()).push.apply(o,Object(i.h)(r));return t.updateMoreAvailableStatus(),!0})),Object(C.a)((function(e){return t.discussionExceptionService.handleRequestErrorInfo(e,R.a.getTranslation("discussionNotificationErrorLoadingComments")),u.a})))},e.prototype.loadCommentsCount=function(){var e=this;this.discussionBackendClient.loadCommentsCount(this.discussionService.getDiscussionInfo().id,!1).subscribe((function(t){e.logger.info("Number of comments loaded",t),e.commentsCountSource.next(t)}),(function(t){e.discussionExceptionService.handleRequestErrorInfo(t,R.a.getTranslation("discussionNotificationErrorLoadingCountComments"))}))},e.prototype.loadTopCommentsCount=function(){var e=this;return this.discussionBackendClient.loadCommentsCount(this.discussionService.getDiscussionInfo().id,!0).pipe(Object(p.a)((function(t){return e.logger.info("Number of top level comments loaded",t)})),Object(C.a)((function(t){return e.discussionExceptionService.handleRequestErrorInfo(t,R.a.getTranslation("discussionNotificationErrorLoadingCountCommentsTopLevel")),u.a})))},e.prototype.trackReadStatus=function(){var e=this;this.discussionBackendClient.trackReadStatus(this.discussionService.getDiscussionInfo().id).pipe(Object(C.a)((function(t){return e.discussionExceptionService.handleRequestErrorInfo(t),u.a}))).subscribe((function(){e.toggleMessagesReadStatus(!0)}))},e.prototype.toggleMessagesReadStatus=function(e){this.messagesReadSource.next(e)},e.prototype.updateMoreAvailableStatus=function(){this.viewRequestSource.getValue()&&this.viewRequestSource.getValue().order===T.a.POPULAR&&this.commentsSource.getValue()&&this.commentsSource.getValue().length>=100?this.isMoreAvailableSource.next(!1):this.commentsSource.getValue()&&this.commentsSource.getValue().length<this.topCommentsCount?this.isMoreAvailableSource.next(!0):this.isMoreAvailableSource.next(!1)},e.prototype.sendNewComment=function(e){var t=this,n=new E(e.message,e.parentCommentId,e.replyToComment?e.replyToComment.owner.id:null);return Object(m.a)(this.discussionBackendClient.addComment(this.discussionService.getDiscussionInfo().id,n,this.COMMENT_PROJECTION),this.meProfileService.getCurrentMeProfile()).pipe(Object(v.a)((function(e){var n=Object(i.f)(e,2),o=n[0];return t.commentAddingSource.next(M.a.of(o,n[1])),t.logger.info("New comment was added.",o),!0})),Object(C.a)((function(e){return t.discussionExceptionService.handleRequestErrorInfo(e,R.a.getTranslation("discussionNotificationErrorCreatingComment")),Object(l.a)(!1)})))},e.prototype.reloadComment=function(e){return this.discussionBackendClient.loadComment(this.discussionService.getDiscussionInfo().id,e.id,this.COMMENT_PROJECTION)},e.prototype.sendEditRequest=function(e,t){var n=this,i=new P;return i.id=e.id,i.message=t,i.visibilityStatus="PUBLIC",this.discussionBackendClient.editComment(this.discussionService.getDiscussionInfo().id,i,this.COMMENT_PROJECTION).pipe(Object(v.a)((function(t){return e.update(t),n.logger.info("Comment was edited.",t),!0})),Object(C.a)((function(e){return n.discussionExceptionService.handleRequestErrorInfo(e,R.a.getTranslation("discussionNotificationErrorCommentEditing")),Object(l.a)(!1)})))},e.prototype.sendDeleteRequest=function(e){var t=this;return this.discussionBackendClient.deleteComment(this.discussionService.getDiscussionInfo().id,e.id).pipe(Object(v.a)((function(){return t.commentDeletionSource.next(e),t.logger.info("Comment was deleted.",e),!0})),Object(C.a)((function(e){return t.discussionExceptionService.handleRequestErrorInfo(e,R.a.getTranslation("discussionNotificationErrorDeletingComment")),Object(l.a)(!1)})))},e.prototype.increaseCommentCountViaWebsocket=function(){this.webSocketUpdatedCountSource.next(1)},e.prototype.addComment=function(e){this.commentAddingSource.next(e)},e.prototype.deleteComment=function(e){this.commentDeletionSource.next(e)},e.prototype.complainAboutComment=function(e){this.toastService.showSuccess(R.a.getTranslation("discussionNotificationSuccessYourComplaintAccepted"))},e.prototype.openReplyToCommentPanel=function(e){if(e){var t=new k.a;t.parentCommentId=e&&e.parentCommentId?this.commentsSource.getValue().find((function(t){return t.id===e.parentCommentId})).id:e.id,t.replyToComment=e,this.replyDataSource.next(t)}else this.replyDataSource.next(null)},e.prototype.getCommentById=function(e){return Object(d.a)(Object(b.a)(this.commentsSource.getValue()),Object(b.a)(this.commentsSource.getValue()).pipe(Object(O.a)((function(e){return Object(b.a)(e.childrenComments)})))).pipe((t=function(t){return t.id===e},function(e){return e.lift(new S(t,e,!1,void 0))}));var t},e.prototype.openEditModePanel=function(e){this.editModeSource.next(e)},e.prototype.generateUserProfilePictureUrl=function(e){return this.isCommentOwnerHaveAvatar(e.owner.pictureUrl)?this.imageSizeSelectService.generateImagePath({type:x.a.AVATAR,id:e.owner.id.toString(),size:40}):e.owner.pictureUrl},e.prototype.isCommentOwnerHaveAvatar=function(e){return null===e.match("anonymous.svg")},e.prototype.addCreatedCommentToTree=function(e,t){e.owner.id!==(null==t?void 0:t.id)&&(e.isCommentHighlighted=!0,this.increaseCommentCountViaWebsocket()),e.owner.id===(null==t?void 0:t.id)&&(e.isCommentAddedByMe=!0),e.parentCommentId?this.commentsSource.getValue().find((function(t){return t.id===e.parentCommentId})).childrenComments.push(e):(this.commentsSource.getValue().unshift(e),this.topCommentsCount++),this.commentsSource.next(this.commentsSource.getValue()),this.commentsCountSource.next(this.commentsCountSource.getValue()+1)},e.prototype.deleteCommentFromTree=function(e){if(e.parentCommentId){var t=this.commentsSource.getValue().find((function(t){return t.id===e.parentCommentId}));t.childrenComments.splice(t.childrenComments.indexOf(e),1)}else this.commentsSource.getValue().splice(this.commentsSource.getValue().indexOf(e),1),this.topCommentsCount--;this.commentsSource.next(this.commentsSource.getValue()),this.commentsCountSource.next(this.commentsCountSource.getValue()-1)},e.prototype.clearCommentsSource=function(){this.isMoreAvailableSource.next(!1),this.commentsSource.next(void 0),this.commentsCountSource.next(void 0),this.viewRequestSource.next(void 0),this.webSocketUpdatedCountSource.next(null)},e.\u0275fac=function(t){return new(t||e)(U.hc(s.a),U.hc(A.a),U.hc(N.a),U.hc(w.a),U.hc(D.a),U.hc(c.a),U.hc(o.a),U.hc(j.a))},e.\u0275prov=U.Mb({token:e,factory:e.\u0275fac}),e}()},"5O5O":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("gFDQ"),o=n("TYT/"),s=function(){function e(e){this.logger=e,this.logger.debug(this.constructor.name+" is created.")}return Object.defineProperty(e.prototype,"commentAttributeClass",{get:function(){return this.attributes.answer?"answer":"useful"},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){e.attributes&&(this.displayName=this.attributes.useful&&!this.attributes.answer?"\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439":"\u0440\u0435\u0448\u0435\u043d\u0438\u0435")},e.\u0275fac=function(t){return new(t||e)(o.Qb(i.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["jr-comment-attribute"]],hostVars:1,hostBindings:function(e,t){2&e&&o.Bb("class",t.commentAttributeClass)},inputs:{attributes:"attributes"},features:[o.yb],decls:1,vars:1,template:function(e,t){1&e&&o.Yc(0),2&e&&o.Zc(t.displayName)},styles:["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;line-height:1;color:#fff;font-weight:600;font-size:14px;text-shadow:0 1px 0 rgba(0,0,0,.1);letter-spacing:.2px;white-space:nowrap;text-align:center;border-radius:4px;border-width:1px;border-style:solid;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:4px 7px 3px;font-size:12px;text-transform:uppercase}[_nghost-%COMP%], [_nghost-%COMP%]:hover{text-decoration:none}.useful[_nghost-%COMP%]{--color-outlined:#407fab;background:#407fab;border-color:#407fab}.answer[_nghost-%COMP%]{--color-outlined:#40ab47;background:#40ab47;border-color:#40ab47}"],changeDetection:0}),e}()},"9fSo":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.UNKNOWN="UNKNOWN",e.USER="USER",e.QUEST="QUEST",e.LECTURE="LECTURE",e.TASK="TASK",e.VIDEO="VIDEO",e.GROUP="GROUP",e.POST="POST",e.ARTICLE="ARTICLE",e.STORY="STORY",e.PAGE="PAGE",e.QUESTION="QUESTION",e.QUIZ="QUIZ",e.PROJECT="PROJECT",e.APP="APP",e.FORUM_QUESTION="FORUM_QUESTION",e}({})},BdVv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("TYT/"),o=n("i5Iq"),s=function(){function e(e,t,n,i){this.elRef=e,this.zone=t,this.platformId=n,this.prismProcessingService=i}return e.prototype.ngOnChanges=function(e){e.innerHtml.previousValue!==e.innerHtml.currentValue&&(this.elRef.nativeElement.innerHTML=this.innerHtml,this.needsPrismProcessing=!0,this.initPrism())},e.prototype.ngAfterViewInit=function(){this.initPrism()},e.prototype.initPrism=function(){this.needsPrismProcessing&&(this.prismSubscription&&this.prismSubscription.unsubscribe(),this.prismSubscription=this.prismProcessingService.processPrismLayout(this.elRef.nativeElement).subscribe(),this.needsPrismProcessing=!1)},e.prototype.ngOnDestroy=function(){this.prismSubscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(i.A),i.Qb(i.C),i.Qb(o.a))},e.\u0275dir=i.Lb({type:e,selectors:[["","jrHtmlWithPrismProcessing",""]],inputs:{innerHtml:["jrHtmlWithPrismProcessing","innerHtml"]},features:[i.yb]}),e}()},Bdkt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){}return e.update=function(e,t){e.rating=t.rating},e}()},CIkO:function(e,t,n){"use strict";var i=n("Q1FS"),o=n("1pIY"),s=n("p0+S");function c(e){var t=e.subscriber,n=e.counter,i=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}t.interval=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=o.async),(!s.isNumeric(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=o.async),new i.Observable((function(n){return n.add(t.schedule(c,e,{subscriber:n,counter:0,period:e})),n}))}},ED4h:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("TYT/"),o=n("gFDQ"),s=n("Valr"),c=n("aP+G"),a=function(e){return{name:e,sprite:"rating"}};function r(e,t){if(1&e&&i.Rb(0,"jr-icon",5),2&e){var n=i.pc().$implicit;i.yc("icon",i.Dc(1,a,"star-"+n))}}var m=function(e,t,n){return{"stars__item--full":e,"stars__item--half":t,"stars__item--empty":n}};function u(e,t){if(1&e){var n=i.Xb();i.Wb(0,"li",3),i.lc("click",(function(){i.Mc(n);var e=t.index;return i.pc().setRating(e+1)})),i.Wc(1,r,1,3,"jr-icon",4),i.Vb()}if(2&e){var o=t.$implicit,s=i.pc();i.yc("ngClass",i.Fc(2,m,"full"===o,"half"===o,"empty"===o)),i.Ab(1),i.yc("ngIf",!s.active)}}var l=function(){function e(e,t){this.logger=e,this.changeDetector=t,this.starsNumber=5,this.maxRating=5,this.active=!1,this.onChangedStar=new i.n,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnChanges=function(e){var t;this.setStars(this.rating),this.classes=((t={stars:!0})["stars--"+this.size]=this.size,t["stars--active"]=this.active,t),this.changeDetector.markForCheck()},e.prototype.setStars=function(e){var t=this;this.calculatedRating=e*(this.starsNumber/this.maxRating),this.stars=Array.from(Array(this.starsNumber).keys()).map((function(e,n){return t.calculatedRating>=n+1?"full":t.calculatedRating>n&&t.calculatedRating<n+1?"half":"empty"}))},e.prototype.setRating=function(e){this.active&&this.onChangedStar.emit(e)},e.\u0275fac=function(t){return new(t||e)(i.Qb(o.a),i.Qb(i.h))},e.\u0275cmp=i.Kb({type:e,selectors:[["jr-rating-stars"]],inputs:{size:"size",rating:"rating",starsNumber:"starsNumber",maxRating:"maxRating",active:"active"},outputs:{onChangedStar:"onChangedStar"},features:[i.yb],decls:3,vars:2,consts:[[3,"ngClass"],[1,"stars__list"],["class","stars__item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"stars__item",3,"ngClass","click"],[3,"icon",4,"ngIf"],[3,"icon"]],template:function(e,t){1&e&&(i.Wb(0,"div",0),i.Wb(1,"ul",1),i.Wc(2,u,2,6,"li",2),i.Vb(),i.Vb()),2&e&&(i.yc("ngClass",t.classes),i.Ab(2),i.yc("ngForOf",t.stars))},directives:[s.q,s.s,s.t,c.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),e}()},I7SJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){}return e.update=function(e,t){e.count=t.count,e.status=t.status},e}()},IbhP:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("mrSG"),o=n("TYT/"),s=n("gFDQ"),c=n("Valr"),a=n("yKVs"),r=n("idQx"),m=function(){function e(e,t,n){this.logger=e,this.imageSizeSelectService=t,this.platformId=n,this.IMAGE_TAG_PATTERN=/<img/g,this.IMAGE_TAG_DEFAULT_STYLES="<img style='opacity: 0; transition: opacity .5s ease-out'",this.IMAGE_SRC_PATTERN=/(<img(?![^>\n]*data-src)[^>\n]*)(src=)/g,this.IMAGE_SRCSET_PATTERN=/(<img(?![^>\n]*data-srcset)[^>\n]*)(srcset=)/g,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.registerImageLazyLoading=function(e,t,n){var i=this;if(Object(c.I)(this.platformId))if("IntersectionObserver"in window){var o=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var s=e.target;i.setLazyImageData(s,t,n).then((function(){s.style.opacity="1",o.unobserve(s)}))}}))}));e.forEach((function(e){return o.observe(e)}))}else e.forEach((function(e){return i.setLazyImageData(e,t,n)}))},e.prototype.prepareImagesFromDomString=function(e){return e.replace(this.IMAGE_SRC_PATTERN,"$1data-$2").replace(this.IMAGE_SRCSET_PATTERN,"$1data-$2").replace(this.IMAGE_TAG_PATTERN,this.IMAGE_TAG_DEFAULT_STYLES)},e.prototype.setLazyImageData=function(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var o,s,c,a,r,m;return Object(i.d)(this,(function(i){switch(i.label){case 0:return s=(o=e.dataset).maxWidth,o.id?s?(c=this.getContentRealWidth(n),a=parseInt(s,10),r=e,[4,this.imageSizeSelectService.generateImagePathAsync({type:n,id:e.dataset.id,size:a>c?c:a,hash:null,maxWidth:a})]):[3,2]:[3,6];case 1:return r.src=i.sent(),c>a&&(e.style.width=s+"px"),[3,5];case 2:return t?(m=e,[4,this.imageSizeSelectService.generateImagePathAsync({type:n,id:e.dataset.id,size:t})]):[3,4];case 3:return m.src=i.sent(),[3,5];case 4:throw new Error("data-max-with or containerWidth must be specified!");case 5:return[3,7];case 6:e.src=e.dataset.src,i.label=7;case 7:return e.removeAttribute("data-src"),[2]}}))}))},e.prototype.getContentRealWidth=function(e){var t=window.innerWidth,n=document.querySelector(".sidebar-nav.sidebar-nav--fixed");return null===n?t:e===r.a.ARTICLE?t-n.clientWidth:t},e.\u0275fac=function(t){return new(t||e)(o.hc(s.a),o.hc(a.a),o.hc(o.C))},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac}),e}()},LYuz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("oilu"),o=n("gFDQ"),s=n("VJAp"),c=n("+BlI"),a=n("TYT/"),r=function(){function e(e,t,n){this.logger=e,this.exceptionService=t,this.toastService=n,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.handleRequestErrorInfo=function(e,t){var n;switch(this.logger.error("Server returned request error:",e),e.code){case"INVALID_ARGUMENT":n=s.a.getTranslation("discussionNotificationErrorInvalidArgument");break;case"SENDING_COMMENT_IS_FORBIDDEN":n=s.a.getTranslation("discussionNotificationErrorSendingCommentIsForbidden");break;case"LEVEL_0_USERS_CANNOT_SEND_COMMENTS":n=s.a.getTranslation("discussionNotificationErrorLevel0UsersCannotSendMassage");break;case"COMMENTS_DAILY_LIMIT_IS_EXCEEDED":n=s.a.getTranslation("discussionNotificationErrorCommentsDailyLimitIsExceeded");break;case"ACCESS_RULE_VIOLATION_MUTE":n=e.message;break;case"AUTHORIZATION_ERROR":n=s.a.getTranslation("discussionNotificationErrorAuthorizationError");break;default:return void this.exceptionService.handleRequestErrorInfo(e,t)}this.toastService.showError(n,t)},e.\u0275fac=function(t){return new(t||e)(a.hc(o.a),a.hc(i.a),a.hc(c.a))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e}()},MiBj:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),o=n("RAok"),s=function(e){return e.LIKE="LIKE",e.HOT="HOT",e.FOLLOW="FOLLOW",e.FAVORITE="FAVORITE",e.SOLUTION="SOLUTION",e.HELPFUL="HELPFUL",e.ARTICLE="ARTICLE",e.OSCAR="OSCAR",e}({});!function(e){e.values=function(){return t.map((function(e){return e.value}))},e.getDisplayName=function(e){return t.find((function(t){return t.value===e})).displayName},e.getIcon=function(e){return t.find((function(t){return t.value===e})).icon};var t=[];o.a.storeWasFullfilled$.subscribe((function(){t.push.apply(t,Object(i.h)([{value:e.LIKE,displayName:o.a.getTranslation("likeStatusLike"),icon:{name:"like",sprite:"likes"}},{value:e.HOT,displayName:o.a.getTranslation("likeStatusLoveIt"),icon:{name:"hot",sprite:"likes"}},{value:e.FOLLOW,displayName:o.a.getTranslation("likeStatusFollow"),icon:{name:"follow",sprite:"likes"}},{value:e.FAVORITE,displayName:o.a.getTranslation("likeStatusBookmark"),icon:{name:"favorite",sprite:"likes"}},{value:e.SOLUTION,displayName:o.a.getTranslation("likeStatusSolution"),icon:{name:"solution",sprite:"likes"}},{value:e.HELPFUL,displayName:o.a.getTranslation("likeStatusHelpful"),icon:{name:"helpful",sprite:"likes"}},{value:e.ARTICLE,displayName:o.a.getTranslation("likeStatusInterested"),icon:{name:"article",sprite:"likes"}},{value:e.OSCAR,displayName:o.a.getTranslation("likeStatusWantMore"),icon:{name:"oscar",sprite:"likes"}}]))}))}(s||(s={}))},"Pn+I":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("bG0t"),o=n("J4K4"),s=n("gFDQ"),c=n("26FU"),a=n("F/XL"),r=n("G5J1"),m=n("67Y/"),u=n("9Z1F"),l=n("oHtu"),d=function(){return function(e,t,n){this.message=e,this.status=t,this.visibilityStatus=n}}(),b=function(){return function(){}}(),h=n("zFH7"),f=n("LYuz"),p=n("VJAp"),g=n("+BlI"),C=n("TYT/"),v=function(){function e(e,t,n,i,o){this.logger=e,this.dateTimeService=t,this.discussionBackendClient=n,this.discussionExceptionService=i,this.toastService=o,this.commentManipulationModalInfoSource=new c.a(null),this.commentManipulationModalInfo$=this.commentManipulationModalInfoSource.asObservable(),this.logger.debug(this.constructor.name+" is created.")}return e.prototype.sendEditRequest=function(e,t,n,i){var o=this,s=new d(t,n,i);return this.discussionBackendClient.adminUpdateComment(e.id,s).pipe(Object(m.a)((function(t){return e.adminUpdate(t),o.logger.info("Edited comment",e),!0})),Object(u.a)((function(e){return o.discussionExceptionService.handleRequestErrorInfo(e,p.a.getTranslation("discussionNotificationErrorDeletingComment")),Object(a.a)(!1)})))},e.prototype.sendDeleteRequest=function(e){var t=this;return this.discussionBackendClient.adminDeleteComment(e.id).pipe(Object(m.a)((function(){return e.visibilityStatus=i.a.DELETED,t.logger.info("The comment is marked for deletion.",e),!0})),Object(u.a)((function(e){return t.discussionExceptionService.handleRequestErrorInfo(e,p.a.getTranslation("discussionNotificationErrorDeletingComment")),Object(a.a)(!1)})))},e.prototype.deleteAllUserComments=function(e,t){var n=this;this.discussionBackendClient.deleteAllUserComments(e.id,l.a.MODERATOR_ERASE_COMMENT_MESSAGE,t).subscribe((function(){var i=(t?p.a.getTranslation("discussionAllUserCommentsMarkedForDeletionDays").replace("%days%",""+t):p.a.getTranslation("discussionAllUserCommentsMarkedForDeletionAllTime")).replace("%userDisplayName%",e.displayName);n.toastService.showSuccess(i),n.logger.info(i)}),(function(e){n.discussionExceptionService.handleRequestErrorInfo(e,p.a.getTranslation("discussionNotificationErrorDeletingComments"))}))},e.prototype.addUserToMutedList=function(e){var t=this,n=new b;n.id=e.id,n.message=p.a.getTranslation("discussionVariableModeratorBlockedCommunicateOnSite"),n.endDate=1e3*this.dateTimeService.getMomentObject().add(3,"days").unix(),this.discussionBackendClient.addUserToMutedList(n).subscribe((function(){var n=p.a.getTranslation("discussionVariableUserWasBlockedFor3Days").replace("%userDisplayName%",e.displayName);t.toastService.showSuccess(n),t.logger.info(n)}),(function(e){t.discussionExceptionService.handleRequestErrorInfo(e)}))},e.prototype.openCommentManipulationModal=function(e,t){this.commentManipulationModalInfoSource.next({commentManipulationType:e,commentId:t})},e.prototype.closeCommentManipulationModal=function(){this.commentManipulationModalInfoSource.next(null)},e.prototype.convertToPost=function(e){var t=this;return this.discussionBackendClient.convertToPost(e).pipe(Object(u.a)((function(e){return t.discussionExceptionService.handleRequestErrorInfo(e),r.a})))},e.prototype.moveToPost=function(e){var t=this;return this.discussionBackendClient.moveToPost(e).pipe(Object(u.a)((function(e){return t.discussionExceptionService.handleRequestErrorInfo(e),r.a})))},e.\u0275fac=function(t){return new(t||e)(C.hc(s.a),C.hc(o.a),C.hc(h.a),C.hc(f.a),C.hc(g.a))},e.\u0275prov=C.Mb({token:e,factory:e.\u0275fac}),e}()},TcM7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),o=n("RAok"),s=function(e){return e.DISLIKE="DISLIKE",e.WRONG="WRONG",e.SPAM="SPAM",e.ABUSE="ABUSE",e.FOUL="FOUL",e.TROLLING="TROLLING",e.OFFTOPIC="OFFTOPIC",e.DUPLICATE="DUPLICATE",e.DIRTY="DIRTY",e.OUTDATED="OUTDATED",e.BORING="BORING",e.UNCLEAR="UNCLEAR",e.HARD="HARD",e.EASY="EASY",e.FAKE="FAKE",e.SHAM="SHAM",e.AWFUL="AWFUL",e}({});!function(e){e.values=function(){return t.map((function(e){return e.value}))},e.getDisplayName=function(e){return t.find((function(t){return t.value===e})).displayName},e.getIcon=function(e){return t.find((function(t){return t.value===e})).icon};var t=[];o.a.storeWasFullfilled$.subscribe((function(){t.push.apply(t,Object(i.h)([{value:e.DISLIKE,displayName:o.a.getTranslation("likeStatusDislike"),icon:{name:"dislike",sprite:"likes"}},{value:e.WRONG,displayName:o.a.getTranslation("likeStatusIncorrectAnswer"),icon:{name:"wrong",sprite:"likes"}},{value:e.SPAM,displayName:o.a.getTranslation("likeStatusSpam/Advertising"),icon:{name:"spam",sprite:"likes"}},{value:e.ABUSE,displayName:o.a.getTranslation("likeStatusOffensive"),icon:{name:"abuse",sprite:"likes"}},{value:e.FOUL,displayName:o.a.getTranslation("likeStatusPolicyViolation"),icon:{name:"foul",sprite:"likes"}},{value:e.TROLLING,displayName:o.a.getTranslation("likeStatusTrolling"),icon:{name:"trolling",sprite:"likes"}},{value:e.OFFTOPIC,displayName:o.a.getTranslation("likeStatusOffTopicForGroup"),icon:{name:"offtopic",sprite:"likes"}},{value:e.DUPLICATE,displayName:o.a.getTranslation("likeStatusDuplicate/AlreadyAsked"),icon:{name:"duplicate",sprite:"likes"}},{value:e.DIRTY,displayName:o.a.getTranslation("likeStatusPoorlyWritten"),icon:{name:"dirty",sprite:"likes"}},{value:e.OUTDATED,displayName:o.a.getTranslation("likeStatusOutdated"),icon:{name:"outdated",sprite:"likes"}},{value:e.BORING,displayName:o.a.getTranslation("likeStatusBoring"),icon:{name:"boring",sprite:"likes"}},{value:e.UNCLEAR,displayName:o.a.getTranslation("likeStatusConfusing"),icon:{name:"unclear",sprite:"likes"}},{value:e.HARD,displayName:o.a.getTranslation("likeStatusTooHard"),icon:{name:"hard",sprite:"likes"}},{value:e.EASY,displayName:o.a.getTranslation("likeStatusTooEasy"),icon:{name:"easy",sprite:"likes"}},{value:e.FAKE,displayName:o.a.getTranslation("likeStatusFake"),icon:{name:"fake",sprite:"likes"}},{value:e.SHAM,displayName:o.a.getTranslation("likeStatusBelieve"),icon:{name:"sham",sprite:"likes"}},{value:e.AWFUL,displayName:o.a.getTranslation("likeStatusBadAwful"),icon:{name:"awful",sprite:"likes"}}]))}))}(s||(s={}))},"U+74":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("9fSo"),o=n("gFDQ"),s=n("Dy+N"),c=n("26FU"),a=n("F/XL"),r=n("TYT/"),m=function(){function e(e,t){this.logger=e,this.meProfileService=t,this.currentDiscussionInfoSource=new c.a(null),this.currentDiscussionInfo$=this.currentDiscussionInfoSource.asObservable(),this.logger.debug(this.constructor.name+" is created.")}return e.prototype.setCurrentDiscussionInfo=function(e){this.currentDiscussionInfoSource.next(e)},e.prototype.getDiscussionInfo=function(){return this.currentDiscussionInfoSource.getValue()},e.prototype.getDiscussionTopicInfo=function(){return this.currentDiscussionTopicInfo},e.prototype.setDiscussionTopicInfo=function(e){this.currentDiscussionTopicInfo=e},e.prototype.isMeOwnerOfQuestionTopic=function(){return this.getDiscussionInfo().type===i.a.QUESTION&&this.currentDiscussionTopicInfo?this.meProfileService.isCurrentUserHasId(this.currentDiscussionTopicInfo.userInfo.id):Object(a.a)(!1)},e.\u0275fac=function(t){return new(t||e)(r.hc(o.a),r.hc(s.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac}),e}()},VJAp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t}(n("ZTZy").a))},VbCB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){return function(e,t,n,i){this.order=e,this.limit=t,this.lastTimestamp=n,this.lastCommentId=i}}()},YquS:function(e,t,n){"use strict";n.r(t),n.d(t,"DiscussionComponent",(function(){return zs}));var i,o,s,c,a,r,m,u,l,d,b,h,f,p,g,C,v,O,y,S,_,M,T,I=n("Valr"),P=n("TYT/"),E=n("Bdkt"),k=n("gFDQ"),w=n("s34m"),A=function(e){return e.OWNER_WITH_SUBSCRIPTION="OWNER_WITH_SUBSCRIPTION",e}({}),D=n("3P9I"),L=n("U+74"),R=n("ds6q"),N=n("15JJ"),x=n("ny24"),j=n("LDOV"),U=n("CIkO"),V=n("eJ3O"),W=n("I65S"),F=(n("1Olq"),n("mrSG")),B=n("VJAp"),$=["discussionNotification"],z=["discussionVariables"];function H(e,t){1&e&&(P.Wb(0,"div",2),P.ac(1,i),P.Vb(),P.Wb(2,"div",3),P.ac(3,o),P.Vb(),P.Wb(4,"div",4),P.ac(5,s),P.Vb(),P.Wb(6,"div",5),P.ac(7,c),P.Vb(),P.Wb(8,"div",6),P.ac(9,a),P.Vb(),P.Wb(10,"div",7),P.ac(11,r),P.Vb(),P.Wb(12,"div",8),P.ac(13,m),P.Vb(),P.Wb(14,"div",9),P.ac(15,u),P.Vb(),P.Wb(16,"div",10),P.ac(17,l),P.Vb(),P.Wb(18,"div",11),P.ac(19,d),P.Vb(),P.Wb(20,"div",12),P.ac(21,b),P.Vb(),P.Wb(22,"div",13),P.ac(23,h),P.Vb(),P.Wb(24,"div",14),P.ac(25,f),P.Vb(),P.Wb(26,"div",15),P.ac(27,p),P.Vb(),P.Wb(28,"div",16),P.ac(29,g),P.Vb(),P.Wb(30,"div",17),P.ac(31,C),P.Vb(),P.Wb(32,"div",18),P.ac(33,v),P.Vb())}function Q(e,t){1&e&&(P.Wb(0,"div",19),P.ac(1,O),P.Vb(),P.Wb(2,"div",20),P.ac(3,y),P.Vb(),P.Wb(4,"div",21),P.ac(5,S),P.Vb(),P.Wb(6,"div",22),P.ac(7,_),P.Vb(),P.Wb(8,"div",23),P.ac(9,M),P.Vb(),P.Wb(10,"div",24),P.ac(11,T),P.Vb())}i="Error while updating comment",o="Voting error",s="Error while changing rating",c="Error while loading discussion",a="Invalid argument",r="The comment is rejected by the server.",m="Users at Level 0 can't leave comments",u="You've reached your daily limit on comments (the limit depends on your level)",l="Authorization error.",d="Error while deleting comments",b="Error while loading comments",h="Error while loading number of comments",f="Error while loading number of top level comments",p="Error while creating comment",g="Error while editing comment",C="Error while deleting comment",v="Thanks! We've received your report",O=" All comments made by user %userDisplayName% in the last %days% days have been marked for deletion ",y=" All comments ever made by user %userDisplayName% have been marked for deletion ",S="All time",_=" days",M="The moderator has blocked your ability to leave comments on the website",T="%userDisplayName%'s ability to leave comments has been blocked. Number of days: 3";var G,q,K,Y,J,X,Z,ee,te,ne,ie,oe,se,ce,ae,re,me,ue,le,de,be,he,fe,pe,ge,Ce,ve,Oe=function(){function e(){}return e.prototype.ngOnInit=function(){B.a.fillStore([this.discussionNotification,this.discussionVariables])},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-discussion-i18n-template"]],viewQuery:function(e,t){var n;1&e&&(P.Tc($,!0,P.L),P.Tc(z,!0,P.L)),2&e&&(P.Ic(n=P.mc())&&(t.discussionNotification=n.first),P.Ic(n=P.mc())&&(t.discussionVariables=n.first))},decls:4,vars:0,consts:[["discussionNotification",""],["discussionVariables",""],["data-i18n","discussionNotificationErrorUpdateComment"],["data-i18n","discussionNotificationErrorVoting"],["data-i18n","discussionNotificationErrorChangeRating"],["data-i18n","discussionNotificationErrorLoadingDiscussion"],["data-i18n","discussionNotificationErrorInvalidArgument"],["data-i18n","discussionNotificationErrorSendingCommentIsForbidden"],["data-i18n","discussionNotificationErrorLevel0UsersCannotSendMassage"],["data-i18n","discussionNotificationErrorCommentsDailyLimitIsExceeded"],["data-i18n","discussionNotificationErrorAuthorizationError"],["data-i18n","discussionNotificationErrorDeletingComments"],["data-i18n","discussionNotificationErrorLoadingComments"],["data-i18n","discussionNotificationErrorLoadingCountComments"],["data-i18n","discussionNotificationErrorLoadingCountCommentsTopLevel"],["data-i18n","discussionNotificationErrorCreatingComment"],["data-i18n","discussionNotificationErrorCommentEditing"],["data-i18n","discussionNotificationErrorDeletingComment"],["data-i18n","discussionNotificationSuccessYourComplaintAccepted"],["data-i18n","discussionAllUserCommentsMarkedForDeletionDays"],["data-i18n","discussionAllUserCommentsMarkedForDeletionAllTime"],["data-i18n","discussionVariableAllUserCommentsMarkedDeletingAllTime"],["data-i18n","discussionVariableAllUserCommentsMarkedDeletingDays"],["data-i18n","discussionVariableModeratorBlockedCommunicateOnSite"],["data-i18n","discussionVariableUserWasBlockedFor3Days"]],template:function(e,t){1&e&&(P.Wc(0,H,34,0,"ng-template",null,0,P.Xc),P.Wc(2,Q,12,0,"ng-template",null,1,P.Xc))},styles:["[_nghost-%COMP%] {display:none}"]}),e}(),ye=n("uB8/"),Se=n("MVCs"),_e=n("VbCB"),Me=n("oF3d"),Te=n("67Y/"),Ie=n("dzgT"),Pe=function(){return function(){}}(),Ee=function(){return function(){}}(),ke=n("IbhP"),we=n("Dy+N"),Ae=n("idQx"),De=n("K9Ia"),Le=n("EWwU");function Re(e,t){if(1&e&&(P.Ub(0),P.Yc(1),P.Tb()),2&e){var n=P.pc(2);P.Ab(1),P.ad(" (",n.commentsCount,")")}}function Ne(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"span",4),P.Yc(2),P.Vb(),P.Tb()),2&e){var n=P.pc(2);P.Ab(2),P.ad("+ ",n.newCommentsCount,"")}}function xe(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"div",3),P.Ub(2),P.ac(3,pe),P.Tb(),P.Wc(4,Re,2,1,"ng-container",1),P.Wc(5,Ne,3,1,"ng-container",1),P.Vb(),P.Tb()),2&e){var n=P.pc();P.Ab(4),P.yc("ngIf",n.commentsCount),P.Ab(1),P.yc("ngIf",n.newCommentsCount)}}pe="Comments",ge="Popular",Ce="New",ve="Old";var je=function(e){return{"tabs__item--active":e}};function Ue(e,t){if(1&e){var n=P.Xb();P.Wb(0,"div",5),P.Wb(1,"ul",6),P.Wb(2,"li",7),P.Wb(3,"span",8),P.lc("click",(function(){P.Mc(n);var e=P.pc();return e.loadCommentsByOrder(e.CommentsOrder.POPULAR)})),P.ac(4,ge),P.Vb(),P.Vb(),P.Wb(5,"li",7),P.Wb(6,"span",8),P.lc("click",(function(){P.Mc(n);var e=P.pc();return e.loadCommentsByOrder(e.CommentsOrder.CREATED_TIME_DESC)})),P.ac(7,Ce),P.Vb(),P.Vb(),P.Wb(8,"li",7),P.Wb(9,"span",8),P.lc("click",(function(){P.Mc(n);var e=P.pc();return e.loadCommentsByOrder(e.CommentsOrder.CREATED_TIME_ASC)})),P.ac(10,ve),P.Vb(),P.Vb(),P.Vb(),P.Vb()}if(2&e){var i=P.pc();P.Ab(2),P.yc("ngClass",P.Dc(3,je,i.commentsViewRequest.order===i.CommentsOrder.POPULAR)),P.Ab(3),P.yc("ngClass",P.Dc(5,je,i.commentsViewRequest.order===i.CommentsOrder.CREATED_TIME_DESC)),P.Ab(3),P.yc("ngClass",P.Dc(7,je,i.commentsViewRequest.order===i.CommentsOrder.CREATED_TIME_ASC))}}var Ve,We,Fe,Be,$e,ze,He,Qe,Ge,qe,Ke=function(e){return{"comments-head--chat-view":e}},Ye=function(){function e(e,t,n){this.logger=e,this.commentsService=t,this.cdr=n,this.CommentsOrder=w.a,this.newCommentsCount=null,this.isDestroyed$=new De.a,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnChanges=function(){this.discussion.userDiscussionInfo&&this.discussion.userDiscussionInfo.newCommentsCount&&(this.newCommentsCount=this.discussion.userDiscussionInfo.newCommentsCount)},e.prototype.ngOnInit=function(){var e=this;this.commentsService.commentsCount$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.commentsCount=t,e.cdr.markForCheck()})),this.commentsService.webSocketUpdatedCount$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){t&&(null===e.newCommentsCount&&(e.newCommentsCount=0),e.newCommentsCount=e.newCommentsCount+t,e.cdr.markForCheck())})),this.commentsService.viewRequest$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.commentsViewRequest=t,e.cdr.markForCheck()}))},e.prototype.loadCommentsByOrder=function(e){var t=new _e.a(e,10);this.commentsService.initCommentLoad(t,this.discussion).subscribe()},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(D.a),P.Qb(P.h))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comments-head"]],inputs:{discussion:"discussion",chatView:"chatView"},features:[P.yb],decls:3,vars:5,consts:[[1,"comments-head","d-sm-flex",3,"ngClass"],[4,"ngIf"],["class","tabs tabs--small d-flex justify-content-center justify-content-sm-end",4,"ngIf"],[1,"comments-head__title"],[1,"comments-head__new-comments-counter"],[1,"tabs","tabs--small","d-flex","justify-content-center","justify-content-sm-end"],["role","tablist",1,"tabs__list"],[1,"tabs__item",3,"ngClass"],[1,"tabs__button",3,"click"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Wc(1,xe,6,2,"ng-container",1),P.Wc(2,Ue,11,9,"div",2),P.Vb()),2&e&&(P.yc("ngClass",P.Dc(3,Ke,t.chatView)),P.Ab(1),P.yc("ngIf",!t.chatView),P.Ab(1),P.yc("ngIf",t.commentsViewRequest))},directives:[I.q,I.t],styles:["[_nghost-%COMP%]{display:block}.tabs[_ngcontent-%COMP%]{-ms-flex-item-align:end;align-self:flex-end;margin-bottom:-1px;border-bottom:0;-webkit-box-shadow:none;box-shadow:none}.comments-head[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #42637c;padding:0;margin:0 0 30px;color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media (min-width:576px){.comments-head[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}}.comments-head__title[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:13px 0 14px;line-height:1;font-size:14px;font-weight:600}@media (max-width:575px){.comments-head__title[_ngcontent-%COMP%]{display:block;text-align:center;font-size:13px}}.comments-head__new-comments-counter[_ngcontent-%COMP%]{color:#62faff;font-weight:600;padding-left:4px}.comments-head--chat-view[_ngcontent-%COMP%]{overflow:hidden;margin:0 30px;border-bottom:none}.comments-head--chat-view[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{position:absolute;margin-top:-4px}.comments-head--chat-view[_ngcontent-%COMP%]   .tabs__item[_ngcontent-%COMP%]{font-weight:400;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.comments-head--chat-view[_ngcontent-%COMP%]   .tabs__item--active[_ngcontent-%COMP%]{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:auto}.comments-head--chat-view[_ngcontent-%COMP%]   .tabs__button[_ngcontent-%COMP%]{padding-bottom:11px}@media (min-width:576px){.comments-head--chat-view[_ngcontent-%COMP%]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}}@media (max-width:670px){.comments-head--chat-view[_ngcontent-%COMP%]{display:none!important}}@media (min-width:1200px){.comments-head--chat-view[_ngcontent-%COMP%]{max-width:760px;margin:0 auto}}.light[_nghost-%COMP%]   .comments-head[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comments-head[_ngcontent-%COMP%]{color:#172b53;border-bottom:1px solid #7a869a}.light[_nghost-%COMP%]   .comments-head--chat-view[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comments-head--chat-view[_ngcontent-%COMP%]{border-bottom:none}.light[_nghost-%COMP%]   .comments-head__new-comments-counter[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comments-head__new-comments-counter[_ngcontent-%COMP%]{color:#4b9cd2}"],changeDetection:0}),e}(),Je=n("QJY3"),Xe=n("wbUM"),Ze=n("Cpur"),et=n("yKVs"),tt=n("t9fZ"),nt=n("VnD/"),it=n("5Ggd"),ot=n("DUip"),st=n("ZaaX"),ct=n("dVL3"),at=n("TfQF"),rt=["i18nTemplate"];function mt(e,t){if(1&e&&(P.Wb(0,"a",8),P.Rb(1,"jr-avatar",9),P.Vb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("src",n.meProfilePictureUrl)}}function ut(e,t){if(1&e&&(P.Ub(0),P.ac(1,ze),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitCharactersRemaining),P.bc(1)}}function lt(e,t){if(1&e&&(P.Ub(0),P.ac(1,He),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitCharactersRemaining),P.bc(1)}}function dt(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"div",16),P.Wc(2,ut,2,1,"ng-container",11),P.Wc(3,lt,2,1,"ng-container",11),P.Vb(),P.Tb()),2&e){var n=P.pc(3);P.Ab(2),P.yc("ngIf",1!==n.messageLimitCharactersRemaining),P.Ab(1),P.yc("ngIf",1===n.messageLimitCharactersRemaining)}}function bt(e,t){if(1&e&&(P.Ub(0),P.ac(1,Qe),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitExceededBy),P.bc(1)}}function ht(e,t){if(1&e&&(P.Ub(0),P.ac(1,Ge),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitExceededBy),P.bc(1)}}function ft(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"div",17),P.Wc(2,bt,2,1,"ng-container",11),P.Wc(3,ht,2,1,"ng-container",11),P.Vb(),P.Tb()),2&e){var n=P.pc(3);P.Ab(2),P.yc("ngIf",1!==n.messageLimitCharactersRemaining),P.Ab(1),P.yc("ngIf",1===n.messageLimitCharactersRemaining)}}function pt(e,t){if(1&e){var n=P.Xb();P.Ub(0),P.Wb(1,"jr-button",18),P.lc("onClick",(function(){return P.Mc(n),P.pc(3).clearReplyPanel()})),P.ac(2,qe),P.Vb(),P.Tb()}2&e&&(P.Ab(1),P.yc("variant","link")("size","sm-wide")("underline",!0))}function gt(e,t){if(1&e){var n=P.Xb();P.Ub(0),P.Wb(1,"div"),P.Rb(2,"jr-rich-editor",10),P.Wb(3,"div"),P.Wc(4,dt,4,2,"ng-container",11),P.Wc(5,ft,4,2,"ng-container",11),P.Wb(6,"div",12),P.Wc(7,pt,3,3,"ng-container",11),P.Wb(8,"jr-button",13),P.lc("onClick",(function(){return P.Mc(n),P.pc(2).sendNewComment()})),P.Wb(9,"b",14),P.ac(10,$e),P.Vb(),P.Wb(11,"b",15),P.Yc(12),P.Vb(),P.Vb(),P.Vb(),P.Vb(),P.Vb(),P.Tb()}if(2&e){var i=P.pc(2);P.Ab(1),P.yc("@fade",!0),P.Ab(1),P.yc("formControl",i.messageFormControl)("minHeight",i.minHeight)("autosize",i.autosize)("insertImageType",i.ImageTypeSelect.COMMENT)("focus",!0)("thumbnailImageOnly",!0)("placeholder",i.richEditorPlaceholder),P.Ab(2),P.yc("ngIf",i.messageFormControl.value.length>.9*i.messageLimit&&i.messageFormControl.value.length<=i.messageLimit),P.Ab(1),P.yc("ngIf",i.messageFormControl.value.length>i.messageLimit),P.Ab(2),P.yc("ngIf",i.replyData.parentCommentId),P.Ab(1),P.yc("variant","success")("size","sm-wide")("disabled",i.messageFormControl.invalid||i.isLoading),P.Ab(4),P.Zc(i.buttonName)}}function Ct(e,t){if(1&e){var n=P.Xb();P.Ub(0),P.Wb(1,"div",4),P.lc("onReadyToLoad",(function(){return P.Mc(n),P.pc().isCommentInUserViewport=!0})),P.Wc(2,mt,2,1,"a",5),P.Wb(3,"div",6),P.Wb(4,"span",7),P.Yc(5),P.Vb(),P.Vb(),P.Wc(6,gt,13,15,"ng-container",0),P.Vb(),P.Tb()}if(2&e){var i=t.ngIf,o=P.pc(),s=P.Jc(3);P.Ab(2),P.yc("ngIf",o.isCommentInUserViewport),P.Ab(3),P.Zc(null==i?null:i.displayName),P.Ab(1),P.yc("ngIf",o.isEditorOpened)("ngIfElse",s)}}$e="Reply",ze=" " + "\ufffd0\ufffd" + " characters remaining ",He=" " + "\ufffd0\ufffd" + " character remaining ",Qe=" Limit exceeded by " + "\ufffd0\ufffd" + " characters ",Ge=" Limit exceeded by " + "\ufffd0\ufffd" + " character ",qe="Cancel ";var vt,Ot,yt,St,_t=["placeholder","Enter your comment"];function Mt(e,t){if(1&e){var n=P.Xb();P.Wb(0,"textarea",19),P.cc(1,_t),P.lc("focus",(function(){return P.Mc(n),P.pc().openEditor()})),P.Vb()}}function Tt(e,t){if(1&e){var n=P.Xb();P.Wb(0,"div",20),P.Wb(1,"div",21),P.Wb(2,"span",22),P.gc(3,vt),P.Wb(4,"a",23),P.lc("click",(function(){return P.Mc(n),P.pc().openAuthModal()})),P.Vb(),P.dc(),P.Vb(),P.Vb(),P.Vb()}}function It(e,t){if(1&e&&(P.Wb(0,"div",24),P.ac(1,Ot),P.Vb(),P.Wb(2,"div",25),P.ac(3,yt),P.Vb(),P.Wb(4,"div",26),P.ac(5,St),P.Vb()),2&e){var n=P.pc();P.Ab(1),P.ec(n.replyToUserDisplayName),P.bc(1)}}vt="You must be " + "\ufffd#4\ufffd" + "signed in" + "\ufffd/#4\ufffd" + " to leave a comment",Ot="Reply to " + "\ufffd0\ufffd" + "",yt="Enter your comment",St="Send";var Pt,Et,kt,wt,At,Dt,Lt,Rt,Nt,xt,jt,Ut,Vt,Wt,Ft,Bt=function(){function e(e,t,n,i,o,s,c){this.logger=e,this.commentsService=t,this.meProfileService=n,this.changeDetector=i,this.authService=o,this.router=s,this.imageSizeSelectService=c,this.ImageTypeSelect=Ae.a,this.minHeight=100,this._replyData=new Xe.a,this.DEFAULT_BUTTON_NAME="Send",this.buttonName=this.DEFAULT_BUTTON_NAME,this.isCommentInUserViewport=!1,this.richEditorPlaceholder="Enter your comment",this.isDestroyed$=new R.Subject,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){var e=this;this.isReply=Boolean(this.replyData&&this.replyData.parentCommentId),this.isReply&&this.openEditor(),this.meProfile$=this.meProfileService.meProfile$,this.messageFormControl=new Je.g("",[Je.C.required,Je.C.maxLength(this.commentsService.COMMENT_LENGTH_LIMIT)]),this.messageLimit=this.commentsService.COMMENT_LENGTH_LIMIT,this.messageFormControl.valueChanges.subscribe((function(t){e.messageLimitCharactersRemaining=e.messageLimit-t.length,e.messageLimitExceededBy=t.length-e.messageLimit})),this.richEditorPlaceholder=B.a.getTranslationFromTemplate(this.i18nTemplate,"myReplyEditorPlaceholder"),this.DEFAULT_BUTTON_NAME=B.a.getTranslationFromTemplate(this.i18nTemplate,"myReplyDefaultButtonName"),this.meProfileService.meProfile$.pipe(Object(tt.a)(1),Object(nt.a)((function(e){return!!e}))).subscribe((function(t){return Object(F.b)(e,void 0,void 0,(function(){var e;return Object(F.d)(this,(function(n){switch(n.label){case 0:return e=this,[4,this.imageSizeSelectService.generateImagePath({type:Ae.a.AVATAR,id:t.id.toString(),size:40,cdn:!1})];case 1:return e.meProfilePictureUrl=n.sent(),[2]}}))}))}))},Object.defineProperty(e.prototype,"replyData",{get:function(){return this._replyData},set:function(e){this._replyData=e,this.replyToUserDisplayName=this._replyData.replyToComment.owner.displayName,this.buttonName=B.a.getTranslationFromTemplate(this.i18nTemplate,"myReplyButtonReplyToComment")},enumerable:!0,configurable:!0}),e.prototype.sendNewComment=function(){var e=this;this.isLoading=!0,this.replyData.message=this.messageFormControl.value,this.commentsService.sendNewComment(this.replyData).subscribe((function(t){e.isLoading=!1,t&&e.clearReplyPanel(),e.changeDetector.markForCheck()}))},e.prototype.clearReplyPanel=function(){this.replyData.parentCommentId?this.commentsService.openReplyToCommentPanel(null):(this.messageFormControl.patchValue(""),this.richEditor.resetTextFieldSize())},e.prototype.openEditor=function(){this.isEditorOpened=!0},e.prototype.openAuthModal=function(){this.authService.openAuthModal(this.router.url)},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(D.a),P.Qb(we.a),P.Qb(P.h),P.Qb(Ze.a),P.Qb(ot.e),P.Qb(et.a))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-my-reply"]],viewQuery:function(e,t){var n;1&e&&(P.dd(it.a,!0),P.Tc(rt,!0,P.L)),2&e&&(P.Ic(n=P.mc())&&(t.richEditor=n.first),P.Ic(n=P.mc())&&(t.i18nTemplate=n.first))},inputs:{minHeight:"minHeight",autosize:"autosize",animationDisabled:"animationDisabled",replyData:"replyData"},decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["fakeTextarea",""],["noContent",""],["i18nTemplate",""],["jrLazyLoad","",1,"my-reply",3,"onReadyToLoad"],["class","my-reply__avatar",4,"ngIf"],[1,"reply-head"],[1,"user"],[1,"my-reply__avatar"],[3,"src"],[3,"formControl","minHeight","autosize","insertImageType","focus","thumbnailImageOnly","placeholder"],[4,"ngIf"],[1,"d-flex","justify-content-end","reply-foot"],[3,"variant","size","disabled","onClick"],[1,"d-sm-none"],[1,"d-none","d-sm-inline"],[1,"col-12","col-sm-auto","left-symbols"],[1,"col-12","col-sm-auto","excess-symbols"],[3,"variant","size","underline","onClick"],[1,"rich-editor-fake-textarea","form-control",3,"focus",6,"placeholder"],[1,"no-content"],[1,"no-content__body"],[1,"text-uppercase"],[1,"link",3,"click"],["data-i18n","myReplyButtonReplyToComment"],["data-i18n","myReplyEditorPlaceholder"],["data-i18n","myReplyDefaultButtonName"]],template:function(e,t){if(1&e&&(P.Wc(0,Ct,7,4,"ng-container",0),P.qc(1,"async"),P.Wc(2,Mt,2,0,"ng-template",null,1,P.Xc),P.Wc(4,Tt,5,0,"ng-template",null,2,P.Xc),P.Wc(6,It,6,1,"ng-template",null,3,P.Xc)),2&e){var n=P.Jc(5);P.yc("ngIf",P.rc(1,2,t.meProfile$))("ngIfElse",n)}},directives:[I.t,st.a,ct.a,it.a,Je.q,Je.h,at.a],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block}.my-reply[_ngcontent-%COMP%]{position:relative}@media (min-width:576px){.my-reply[_ngcontent-%COMP%]{padding-left:50px}}.my-reply__avatar[_ngcontent-%COMP%]{display:none}@media (min-width:576px){.my-reply__avatar[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;width:40px;height:40px}}.reply-head[_ngcontent-%COMP%]{position:relative;line-height:1;margin-bottom:5px}.reply-head[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.reply-head[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-size:14px;line-height:1;font-weight:700;color:#fff;text-decoration:none}.reply-foot[_ngcontent-%COMP%]{padding-top:7px;margin:0;font-size:14px;white-space:nowrap}.reply-foot[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-top:7px}.excess-symbols[_ngcontent-%COMP%], .left-symbols[_ngcontent-%COMP%]{font-size:.667em;line-height:1;padding:5px 0 0}.excess-symbols[_ngcontent-%COMP%]{color:#ff7337}.light[_nghost-%COMP%]   .reply-head[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .reply-head[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:#172b53}.light[_nghost-%COMP%]   .excess-symbols[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .excess-symbols[_ngcontent-%COMP%]{color:#ff6c60}.light[_nghost-%COMP%]   .rich-editor-fake-textarea[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .rich-editor-fake-textarea[_ngcontent-%COMP%]{border-color:#b7bfcd}"],data:{animation:[Le.a]},changeDetection:0}),e}(),$t=n("3lvd"),zt=function(e){return e.PREMIUM="PREMIUM",e.PREMIUM_PRO="PREMIUM_PRO",e}({}),Ht=function(){function e(){}return e.PREMIUM="PREMIUM",e.PREMIUM_PRO="PREMIUM PRO",e}(),Qt=n("bG0t"),Gt=n("J4K4"),qt=n("AytR"),Kt=n("oHtu"),Yt=function(e){return e.UNVERIFIED="UNVERIFIED",e.VERIFIED="VERIFIED",e.CLAIM="CLAIM",e}({}),Jt=n("Pn+I"),Xt=n("xMyE"),Zt=n("FCKb"),en=n("qDEK"),tn=n("ryQI"),nn=function(){function e(){this.commentVisibilityStatusSource=new De.a,this.commentVisibilityStatus$=this.commentVisibilityStatusSource.asObservable(),this.commentStatusSource=new De.a,this.commentStatus$=this.commentStatusSource.asObservable()}return e.prototype.setCommentVisibilityStatus=function(e){this.commentVisibilityStatusSource.next(e)},e.prototype.setCommentStatus=function(e){this.commentStatusSource.next(e)},e.\u0275prov=P.Mb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),on=n("FTVK"),sn=n("0Pmw"),cn=n("aP+G"),an=n("5O5O"),rn=n("9fSo"),mn=n("MiBj"),un=n("7X0/"),ln=n("12JI"),dn=function(e){return e.CONVERT_TO_POST="CONVERT_TO_POST",e.MOVE_TO_POST="MOVE_TO_POST",e}({}),bn=n("+BlI"),hn=n("ac40"),fn=n("2ANy"),pn=n("I0nk"),gn=n("BAFo"),Cn=n("96P2");Ut="for one day",Vt="for one week",Wt="for a month",Ft="for all time";var vn,On,yn,Sn,_n,Mn,Tn,In,Pn,En,kn,wn,An,Dn=function(){function e(e,t){this.logger=e,this.commentsAdminService=t,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.deleteAllUserComments=function(e){this.commentsAdminService.deleteAllUserComments(this.comment.owner,e)},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(Jt.a))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comment-submenu"]],inputs:{comment:"comment"},decls:8,vars:4,consts:[[3,"subItem","click"]],template:function(e,t){1&e&&(P.Wb(0,"jr-dropdown-item",0),P.lc("click",(function(){return t.deleteAllUserComments(1)})),P.ac(1,Ut),P.Vb(),P.Wb(2,"jr-dropdown-item",0),P.lc("click",(function(){return t.deleteAllUserComments(7)})),P.ac(3,Vt),P.Vb(),P.Wb(4,"jr-dropdown-item",0),P.lc("click",(function(){return t.deleteAllUserComments(30)})),P.ac(5,Wt),P.Vb(),P.Wb(6,"jr-dropdown-item",0),P.lc("click",(function(){return t.deleteAllUserComments()})),P.ac(7,Ft),P.Vb()),2&e&&(P.yc("subItem",!0),P.Ab(2),P.yc("subItem",!0),P.Ab(2),P.yc("subItem",!0),P.Ab(2),P.yc("subItem",!0))},directives:[gn.a],encapsulation:2,changeDetection:0}),e}(),Ln=["i18nTemplate"];function Rn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",16),P.lc("click",(function(){return P.Mc(n),P.pc().markAsSolution()})),P.ac(1,_n),P.Vb()}}function Nn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",16),P.lc("click",(function(){return P.Mc(n),P.pc().markAsHelpful()})),P.ac(1,Mn),P.Vb()}}function xn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",16),P.lc("click",(function(){return P.Mc(n),P.pc().verifyComment()})),P.ac(1,Tn),P.Vb()}}function jn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",17),P.lc("click",(function(){return P.Mc(n),P.pc().openEditPanel()})),P.Yc(1,"Edit "),P.Vb()}}function Un(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",18),P.lc("click",(function(){return P.Mc(n),P.pc().complain()})),P.Yc(1,"Report "),P.Vb()}}function Vn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",19),P.lc("click",(function(){return P.Mc(n),P.pc().hideComment()})),P.ac(1,In),P.Vb()}}function Wn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",16),P.lc("click",(function(){return P.Mc(n),P.pc().showComment()})),P.ac(1,Pn),P.Vb()}}function Fn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",20),P.lc("click",(function(){return P.Mc(n),P.pc().deleteComment()})),P.ac(1,En),P.Vb()}}function Bn(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",20),P.lc("click",(function(){return P.Mc(n),P.pc().eraseComment()})),P.ac(1,kn),P.Vb()}}function $n(e,t){1&e&&(P.Wb(0,"jr-dropdown-item",21),P.ac(1,wn),P.Vb())}_n="Mark as solution ",Mn="Mark as helpful ",Tn="Verify ",In="Hide ",Pn="Restore ",En="Delete ",kn="Erase ",wn="Send a warning ",An=" Delete all " + "\ufffd#2\ufffd" + "" + "\ufffd/#2\ufffd" + "";var zn,Hn,Qn,Gn,qn,Kn,Yn,Jn=function(){return{name:"right"}};function Xn(e,t){if(1&e&&(P.Wb(0,"jr-dropdown-item",22),P.gc(1,An),P.Rb(2,"jr-icon",4),P.dc(),P.Vb()),2&e){var n=P.pc();P.yc("jrDropdownButton",n.dropdownSubMenuHandler),P.Ab(2),P.yc("icon",P.Cc(2,Jn))}}function Zn(e,t){if(1&e&&P.Rb(0,"jr-comment-submenu",23),2&e){var n=P.pc();P.yc("comment",n.comment)}}function ei(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",18),P.lc("click",(function(){return P.Mc(n),P.pc().muteUser()})),P.ac(1,zn),P.Vb()}}function ti(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",18),P.lc("click",(function(){return P.Mc(n),P.pc().convertToPost()})),P.ac(1,Hn),P.Vb()}}function ni(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",18),P.lc("click",(function(){return P.Mc(n),P.pc().moveToPost()})),P.ac(1,Qn),P.Vb()}}function ii(e,t){1&e&&(P.Wb(0,"div",24),P.ac(1,Gn),P.Vb(),P.Wb(2,"div",25),P.ac(3,qn),P.Vb(),P.Wb(4,"div",26),P.ac(5,Kn),P.Vb(),P.Wb(6,"div",27),P.ac(7,Yn),P.Vb())}zn=" Block comments ",Hn=" Convert to post ",Qn=" Move to post ",Gn=" The comment was verified ",qn=" The comment was hidden ",Kn=" The comment was posted ",Yn=" The comment was marked for deletion ";var oi,si,ci,ai,ri,mi,ui,li,di,bi,hi,fi,pi,gi,Ci,vi,Oi=function(e){return{"menu-button--open":e}},yi=function(){return{name:"more"}},Si=function(){function e(e,t,n,i,o,s,c,a,r){this.logger=e,this.meProfileService=t,this.toastService=n,this.discussionService=i,this.commentsService=o,this.commentsAdminService=s,this.likesService=c,this.changeDetector=a,this.commentService=r,this.CommentStatus=Yt,this.DiscussionType=rn.a,this.VisibilityStatus=Qt.a,this.DropdownPosition=hn.a,this.dropdownMenuHandler=new un.a,this.dropdownSubMenuHandler=new un.a,this.isDestroyed$=new R.Subject,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){var e=this;this.meProfileService.isMeModerator$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.isMeModerator=t}))},e.prototype.ngOnChanges=function(e){var t=this;this.discussionType=this.discussionService.getDiscussionInfo().type,this.discussionService.isMeOwnerOfQuestionTopic().subscribe((function(e){return t.isMeOwnerOfQuestionTopic=e}))},e.prototype.verifyComment=function(){var e=this;this.commentsAdminService.sendEditRequest(this.comment,null,Yt.VERIFIED,null).subscribe((function(t){t&&(e.toastService.showSuccess(B.a.getTranslationFromTemplate(e.i18nTemplate,"commentMenuPopupSuccessCommentVerified")),e.commentService.setCommentStatus(Yt.VERIFIED))}))},e.prototype.openEditPanel=function(){this.commentsService.openEditModePanel(this.comment)},e.prototype.hideComment=function(){var e=this;this.commentsAdminService.sendEditRequest(this.comment,null,null,Qt.a.PRIVATE).subscribe((function(t){t&&(e.toastService.showSuccess(B.a.getTranslationFromTemplate(e.i18nTemplate,"commentMenuPopupSuccessCommentHidden")),e.commentService.setCommentVisibilityStatus(Qt.a.PRIVATE))}))},e.prototype.showComment=function(){var e=this;this.commentsAdminService.sendEditRequest(this.comment,null,null,Qt.a.PUBLIC).subscribe((function(t){t&&(e.toastService.showSuccess(B.a.getTranslationFromTemplate(e.i18nTemplate,"commentMenuPopupSuccessCommentPosted")),e.commentService.setCommentVisibilityStatus(Qt.a.PUBLIC))}))},e.prototype.complain=function(){this.commentsService.complainAboutComment(this.comment)},e.prototype.deleteComment=function(){var e=this;this.isMeModerator&&!this.comment.isMeOwner?this.commentsAdminService.sendDeleteRequest(this.comment).subscribe((function(t){t&&(e.toastService.showSuccess(B.a.getTranslationFromTemplate(e.i18nTemplate,"commentMenuPopupSuccessCommentMarkedDeletion")),e.changeDetector.markForCheck())})):this.commentsService.sendDeleteRequest(this.comment).subscribe((function(){e.changeDetector.markForCheck()}))},e.prototype.eraseComment=function(){var e=this;this.isMeModerator&&!this.comment.isMeOwner?this.commentsAdminService.sendEditRequest(this.comment,Kt.a.MODERATOR_ERASE_COMMENT_MESSAGE,null,null).subscribe((function(){return e.changeDetector.markForCheck()})):this.commentsService.sendEditRequest(this.comment,Kt.a.AUTHOR_ERASE_COMMENT_MESSAGE).subscribe((function(){return e.changeDetector.markForCheck()}))},e.prototype.muteUser=function(){this.commentsAdminService.addUserToMutedList(this.comment.owner)},e.prototype.markAsSolution=function(){var e=this;this.likesService.changeLikeStatus(this.discussionService.getDiscussionInfo(),this.comment,mn.a.SOLUTION).subscribe((function(){e.changeDetector.markForCheck()}))},e.prototype.markAsHelpful=function(){var e=this;this.likesService.changeLikeStatus(this.discussionService.getDiscussionInfo(),this.comment,mn.a.HELPFUL).subscribe((function(){e.changeDetector.markForCheck()}))},e.prototype.convertToPost=function(){this.commentsAdminService.openCommentManipulationModal(dn.CONVERT_TO_POST,this.comment.id)},e.prototype.moveToPost=function(){this.commentsAdminService.openCommentManipulationModal(dn.MOVE_TO_POST,this.comment.id)},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(we.a),P.Qb(bn.a),P.Qb(L.a),P.Qb(D.a),P.Qb(Jt.a),P.Qb(ln.a),P.Qb(P.h),P.Qb(nn))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comment-menu"]],viewQuery:function(e,t){var n;1&e&&P.Tc(Ln,!0,P.L),2&e&&P.Ic(n=P.mc())&&(t.i18nTemplate=n.first)},inputs:{comment:"comment"},features:[P.yb],decls:27,vars:26,consts:[["offset","4px",3,"dropdownMenuHandler","position"],["ngProjectAs","jrDropdownToggle",5,["jrDropdownToggle"]],["jrDropdownToggle",""],["type","button",1,"button","menu-button",3,"ngClass"],[3,"icon"],["ngProjectAs","jrDropdownContent",5,["jrDropdownContent"]],["jrDropdownContent",""],["class","text-green",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["class","text-neon",3,"click",4,"ngIf"],["class","text-corporate",3,"click",4,"ngIf"],["class","text-red",3,"click",4,"ngIf"],["class","text-corporate",4,"ngIf"],["class","text-red",3,"jrDropdownButton",4,"ngIf"],[3,"comment",4,"ngIf"],["i18nTemplate",""],[1,"text-green",3,"click"],[3,"click"],[1,"text-neon",3,"click"],[1,"text-corporate",3,"click"],[1,"text-red",3,"click"],[1,"text-corporate"],[1,"text-red",3,"jrDropdownButton"],[3,"comment"],["data-i18n","commentMenuPopupSuccessCommentVerified"],["data-i18n","commentMenuPopupSuccessCommentHidden"],["data-i18n","commentMenuPopupSuccessCommentPosted"],["data-i18n","commentMenuPopupSuccessCommentMarkedDeletion"]],template:function(e,t){1&e&&(P.Wb(0,"jr-dropdown",0),P.Ub(1,1,2),P.Wb(3,"button",3),P.qc(4,"async"),P.Rb(5,"jr-icon",4),P.Vb(),P.Tb(),P.Ub(6,5,6),P.Wb(8,"jr-dropdown-panel"),P.Wc(9,Rn,2,0,"jr-dropdown-item",7),P.Wc(10,Nn,2,0,"jr-dropdown-item",7),P.Wc(11,xn,2,0,"jr-dropdown-item",7),P.Wc(12,jn,2,0,"jr-dropdown-item",8),P.Wc(13,Un,2,0,"jr-dropdown-item",9),P.Wc(14,Vn,2,0,"jr-dropdown-item",10),P.Wc(15,Wn,2,0,"jr-dropdown-item",7),P.Wc(16,Fn,2,0,"jr-dropdown-item",11),P.Wc(17,Bn,2,0,"jr-dropdown-item",11),P.Wc(18,$n,2,0,"jr-dropdown-item",12),P.Wc(19,Xn,3,3,"jr-dropdown-item",13),P.Wc(20,Zn,1,1,"jr-comment-submenu",14),P.qc(21,"async"),P.Wc(22,ei,2,0,"jr-dropdown-item",9),P.Wc(23,ti,2,0,"jr-dropdown-item",9),P.Wc(24,ni,2,0,"jr-dropdown-item",9),P.Vb(),P.Tb(),P.Vb(),P.Wc(25,ii,8,0,"ng-template",null,15,P.Xc)),2&e&&(P.yc("dropdownMenuHandler",t.dropdownMenuHandler)("position",t.DropdownPosition.BOTTOM_RIGHT),P.Ab(3),P.yc("ngClass",P.Dc(23,Oi,P.rc(4,19,t.dropdownMenuHandler.isMenuShown$))),P.Ab(2),P.yc("icon",P.Cc(25,yi)),P.Ab(4),P.yc("ngIf",t.discussionType===t.DiscussionType.QUESTION&&(t.isMeModerator||t.isMeOwnerOfQuestionTopic)&&!t.comment.attributes.answer),P.Ab(1),P.yc("ngIf",t.discussionType===t.DiscussionType.QUESTION&&(t.isMeModerator||t.isMeOwnerOfQuestionTopic)&&!t.comment.attributes.answer&&!t.comment.attributes.useful),P.Ab(1),P.yc("ngIf",t.isMeModerator&&t.comment.status!==t.CommentStatus.VERIFIED),P.Ab(1),P.yc("ngIf",t.isMeModerator||t.comment.isMeOwner),P.Ab(1),P.yc("ngIf",!t.comment.isMeOwner),P.Ab(1),P.yc("ngIf",t.isMeModerator&&t.comment.visibilityStatus===t.VisibilityStatus.PUBLIC),P.Ab(1),P.yc("ngIf",t.isMeModerator&&t.comment.visibilityStatus!==t.VisibilityStatus.PUBLIC),P.Ab(1),P.yc("ngIf",(t.isMeModerator||t.comment.isMeOwner)&&t.comment.visibilityStatus!==t.VisibilityStatus.DELETED&&!t.comment.childrenComments.length),P.Ab(1),P.yc("ngIf",(t.isMeModerator||t.comment.isMeOwner)&&t.comment.visibilityStatus!==t.VisibilityStatus.DELETED&&t.comment.childrenComments.length>0),P.Ab(1),P.yc("ngIf",t.isMeModerator&&!t.comment.isMeOwner),P.Ab(1),P.yc("ngIf",t.isMeModerator&&!t.comment.isMeOwner),P.Ab(1),P.yc("ngIf",P.rc(21,21,t.dropdownSubMenuHandler.isMenuShown$)),P.Ab(2),P.yc("ngIf",t.isMeModerator&&!t.comment.isMeOwner),P.Ab(1),P.yc("ngIf",t.isMeModerator),P.Ab(1),P.yc("ngIf",t.isMeModerator))},directives:[fn.a,I.q,cn.a,pn.a,I.t,gn.a,Cn.a,Dn],pipes:[I.b],encapsulation:2,changeDetection:0}),e}(),_i=n("BdVv"),Mi=n("TcM7"),Ti=n("I7SJ"),Ii=n("zFH7"),Pi=n("26FU"),Ei=function(){function e(){this.statusSource=new De.a,this.status$=this.statusSource.asObservable(),this.isBookmarkedSource=new Pi.a(void 0),this.isBookmarked$=this.isBookmarkedSource.asObservable().pipe(Object(nt.a)((function(e){return void 0!==e})))}return e.prototype.setBookmarkedState=function(e){this.isBookmarkedSource.next(e)},e.prototype.setStatus=function(e){this.statusSource.next(e)},e.\u0275prov=P.Mb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),ki=n("duv+");function wi(e,t){if(1&e&&(P.Ub(0),P.Rb(1,"jr-icon",3),P.Yc(2),P.Tb()),2&e){var n=P.pc().$implicit,i=P.pc();P.Ab(1),P.yc("icon",i.LikeStatusPositive.getIcon(n)),P.Ab(1),P.ad(" ",i.LikeStatusPositive.getDisplayName(n)," ")}}function Ai(e,t){if(1&e&&(P.Ub(0),P.Rb(1,"jr-icon",3),P.Yc(2),P.Tb()),2&e){var n=P.pc().$implicit,i=P.pc();P.Ab(1),P.yc("icon",i.LikeStatusNegative.getIcon(n)),P.Ab(1),P.ad(" ",i.LikeStatusNegative.getDisplayName(n)," ")}}function Di(e,t){if(1&e){var n=P.Xb();P.Wb(0,"jr-dropdown-item",1),P.lc("click",(function(){P.Mc(n);var e=t.$implicit;return P.pc().selectAdditionalLikeStatus(e)})),P.Wc(1,wi,3,2,"ng-container",2),P.Wc(2,Ai,3,2,"ng-container",2),P.Vb()}if(2&e){var i=P.pc();P.yc("noBorder",!0),P.Ab(1),P.yc("ngIf",i.displayPositiveStatuses),P.Ab(1),P.yc("ngIf",!i.displayPositiveStatuses)}}var Li=function(){function e(e,t,n){this.logger=e,this.likesService=t,this.likesPanelService=n,this.LikeStatusPositive=mn.a,this.LikeStatusNegative=Mi.a,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnChanges=function(e){var t=this;this.displayPositiveStatuses=mn.a.values().some((function(e){return e===t.likesInfo.status})),this.displayedLikeStatuses=this.likesService.getSuitableLikeStatuses(this.discussion.type,this.displayPositiveStatuses,!!this.comment)},e.prototype.selectAdditionalLikeStatus=function(e){var t=this;e!==mn.a.FAVORITE?this.likesService.changeLikeStatus(this.discussion,this.comment,e).subscribe((function(e){Ti.a.update(t.likesInfo,e),t.likesPanelService.setStatus(e.status)})):this.likesService.updateBookmarksEntityStatus(this.comment,this.discussion).subscribe((function(e){t.likesPanelService.setBookmarkedState(!!e)}))},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(ln.a),P.Qb(Ei))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-likes-menu"]],inputs:{likesInfo:"likesInfo",discussion:"discussion",comment:"comment"},features:[P.yb],decls:2,vars:1,consts:[[3,"noBorder","click",4,"ngFor","ngForOf"],[3,"noBorder","click"],[4,"ngIf"],[3,"icon"]],template:function(e,t){1&e&&(P.Wb(0,"jr-dropdown-panel"),P.Wc(1,Di,3,3,"jr-dropdown-item",0),P.Vb()),2&e&&(P.Ab(1),P.yc("ngForOf",t.displayedLikeStatuses))},directives:[pn.a,I.s,gn.a,I.t,cn.a],styles:["jr-icon[_ngcontent-%COMP%]{vertical-align:bottom;font-size:22px;margin-right:6px}[_nghost-%COMP%]     .icon--likes-boring, [_nghost-%COMP%]     .icon--likes-unclear{color:#fff}.light[_nghost-%COMP%]     .icon--likes-boring, .light   [_nghost-%COMP%]     .icon--likes-boring, .light[_nghost-%COMP%]     .icon--likes-unclear, .light   [_nghost-%COMP%]     .icon--likes-unclear{color:#000}"],changeDetection:0}),e}();function Ri(e,t){if(1&e&&(P.Wb(0,"div",13),P.Rb(1,"jr-icon",6),P.Vb()),2&e){var n=P.pc();P.Ab(1),P.yc("icon",n.LikeStatusNegative.getIcon(n.likesInfo.status))}}function Ni(e,t){if(1&e&&P.Rb(0,"jr-likes-menu",14),2&e){var n=P.pc();P.yc("likesInfo",n.likesInfo)("discussion",n.discussion)("comment",n.comment)}}function xi(e,t){if(1&e&&P.Rb(0,"jr-likes-menu",14),2&e){var n=P.pc();P.yc("likesInfo",n.likesInfo)("discussion",n.discussion)("comment",n.comment)}}function ji(e,t){if(1&e&&(P.Wb(0,"div",13),P.Rb(1,"jr-icon",6),P.Vb()),2&e){var n=P.pc();P.Ab(1),P.yc("icon",n.LikeStatusPositive.getIcon(n.likesInfo.status))}}function Ui(e,t){if(1&e&&(P.Wb(0,"div",13),P.Rb(1,"jr-icon",6),P.Vb()),2&e){var n=P.pc();P.Ab(1),P.yc("icon",n.LikeStatusPositive.getIcon(n.LikeStatusPositive.FAVORITE))}}var Vi,Wi=function(e){return{"reaction--comments":e}},Fi=function(e){return{"reaction__dislike--active":e}},Bi=function(e){return{name:e,sprite:"likes"}},$i=function(e,t,n){return{"likes-count--positive":e,"likes-count--negative":t,"likes-count--active":n}},zi=function(e){return{"reaction__like--active":e}},Hi=function(){function e(e,t,n,i,o,s,c){this.logger=e,this.meProfileService=t,this.likesService=n,this.discussionService=i,this.discussionBackendClient=o,this.likesPanelService=s,this.changeDetector=c,this.LikeStatusPositive=mn.a,this.LikeStatusNegative=Mi.a,this.DropdownPosition=hn.a,this.likeDropdownMenuHandler=new un.a(ki.a.CUSTOM),this.dislikeDropdownMenuHandler=new un.a(ki.a.CUSTOM),this.isDestroyed$=new R.Subject,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){var e=this;this.likesPanelService.status$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.likesInfo.status=t,e.changeDetector.markForCheck()})),this.meProfileService.isMeAuthenticated$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.isLikeButtonDisabled=!t,e.changeDetector.markForCheck()})),this.discussionService.currentDiscussionInfo$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.comment||e.updateLikeInfo(t.likes,!1)})),this.likesPanelService.isBookmarked$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.isBookmarked=!e.comment&&t,e.changeDetector.markForCheck()}))},e.prototype.ngOnChanges=function(e){var t=this;this.comment?this.likesInfo=this.comment.likes:(this.likesInfo=this.discussion.likes,this.discussion.userDiscussionInfo&&this.likesPanelService.setBookmarkedState(this.discussion.userDiscussionInfo.isBookmarked)),this.isLikePositive=mn.a.values().some((function(e){return e===t.likesInfo.status})),this.isLikeNegative=Mi.a.values().some((function(e){return e===t.likesInfo.status}))},e.prototype.toggleLikeStatus=function(e){var t=this;this.isLikeButtonDisabled||(this.toggleLikeButtonDisabledState(),!this.likesInfo.status||this.isLikeNegative?this.likesService.changeLikeStatus(this.discussion,this.comment,mn.a.LIKE).subscribe((function(n){t.toggleLikeButtonDisabledState(n),t.updateLikeInfo(n),t.likeDropdownMenuHandler.toggleMenu(e),t.changeDetector.markForCheck()})):this.likesService.changeLikeStatus(this.discussion,this.comment,null).subscribe((function(n){t.toggleLikeButtonDisabledState(n),t.updateLikeInfo(n),t.likeDropdownMenuHandler.isMenuShown()&&t.likeDropdownMenuHandler.toggleMenu(e),t.changeDetector.markForCheck()})))},e.prototype.toggleDislikeStatus=function(e){var t=this;this.isLikeButtonDisabled||(this.toggleLikeButtonDisabledState(),!this.likesInfo.status||this.isLikePositive?this.likesService.changeLikeStatus(this.discussion,this.comment,Mi.a.DISLIKE).subscribe((function(n){t.toggleLikeButtonDisabledState(n),t.updateLikeInfo(n),t.dislikeDropdownMenuHandler.toggleMenu(e),t.changeDetector.markForCheck()})):this.likesService.changeLikeStatus(this.discussion,this.comment,null).subscribe((function(n){t.toggleLikeButtonDisabledState(n),t.updateLikeInfo(n),t.dislikeDropdownMenuHandler.isMenuShown()&&t.dislikeDropdownMenuHandler.toggleMenu(e),t.changeDetector.markForCheck()})))},e.prototype.toggleLikeButtonDisabledState=function(e){this.isLikeButtonDisabled=!this.isLikeButtonDisabled,e&&Ti.a.update(this.likesInfo,e),this.changeDetector.markForCheck()},e.prototype.updateLikeInfo=function(e,t){var n=this;void 0===t&&(t=!0),Ti.a.update(this.likesInfo,e),this.isLikePositive=mn.a.values().some((function(e){return e===n.likesInfo.status})),this.isLikeNegative=Mi.a.values().some((function(e){return e===n.likesInfo.status})),this.updateDiscussion(),t&&this.discussionService.setCurrentDiscussionInfo(this.discussion),this.changeDetector.markForCheck()},e.prototype.updateDiscussion=function(){var e=this;this.discussionBackendClient.loadDiscussionInfo(this.discussion.id).pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){E.a.update(e.discussion,t),e.changeDetector.markForCheck()}))},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(we.a),P.Qb(ln.a),P.Qb(L.a),P.Qb(Ii.a),P.Qb(Ei),P.Qb(P.h))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-likes-panel"]],inputs:{discussion:"discussion",comment:"comment"},features:[P.zb([Ei]),P.yb],decls:25,vars:36,consts:[[1,"reaction",3,"ngClass"],["class","reaction__emotion",4,"ngIf"],[3,"dropdownMenuHandler","position"],["ngProjectAs","jrDropdownToggle",5,["jrDropdownToggle"]],["jrDropdownToggle",""],["type","button",1,"reaction__dislike",3,"ngClass","disabled","click"],[3,"icon"],["ngProjectAs","jrDropdownContent",5,["jrDropdownContent"]],["jrDropdownContent",""],[3,"likesInfo","discussion","comment",4,"ngIf"],[1,"reaction__count"],[1,"likes-count",3,"ngClass"],["type","button",1,"reaction__like",3,"ngClass","disabled","click"],[1,"reaction__emotion"],[3,"likesInfo","discussion","comment"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Wc(1,Ri,2,1,"div",1),P.Wb(2,"jr-dropdown",2),P.Ub(3,3,4),P.Wb(5,"button",5),P.lc("click",(function(e){return t.toggleDislikeStatus(e)})),P.Rb(6,"jr-icon",6),P.Vb(),P.Tb(),P.Ub(7,7,8),P.Wc(9,Ni,1,3,"jr-likes-menu",9),P.qc(10,"async"),P.Tb(),P.Vb(),P.Wb(11,"div",10),P.Wb(12,"span",11),P.Yc(13),P.Vb(),P.Vb(),P.Wb(14,"jr-dropdown",2),P.Ub(15,3,4),P.Wb(17,"button",12),P.lc("click",(function(e){return t.toggleLikeStatus(e)})),P.Rb(18,"jr-icon",6),P.Vb(),P.Tb(),P.Ub(19,7,8),P.Wc(21,xi,1,3,"jr-likes-menu",9),P.qc(22,"async"),P.Tb(),P.Vb(),P.Wc(23,ji,2,1,"div",1),P.Wc(24,Ui,2,1,"div",1),P.Vb()),2&e&&(P.yc("ngClass",P.Dc(22,Wi,t.comment)),P.Ab(1),P.yc("ngIf",t.isLikeNegative&&t.likesInfo.status!==t.LikeStatusNegative.DISLIKE),P.Ab(1),P.yc("dropdownMenuHandler",t.dislikeDropdownMenuHandler)("position",t.DropdownPosition.BOTTOM_LEFT),P.Ab(3),P.yc("ngClass",P.Dc(24,Fi,t.isLikeNegative))("disabled",t.isLikeButtonDisabled),P.Ab(1),P.yc("icon",P.Dc(26,Bi,t.comment?"dislike-small":"dislike")),P.Ab(3),P.yc("ngIf",P.rc(10,18,t.dislikeDropdownMenuHandler.isMenuShown$)),P.Ab(3),P.yc("ngClass",P.Fc(28,$i,t.likesInfo.count>0,t.likesInfo.count<0,t.isLikeNegative||t.isLikePositive)),P.Ab(1),P.ad(" ",t.likesInfo.count>0?"+"+t.likesInfo.count:t.likesInfo.count," "),P.Ab(1),P.yc("dropdownMenuHandler",t.likeDropdownMenuHandler)("position",t.DropdownPosition.BOTTOM_LEFT),P.Ab(3),P.yc("ngClass",P.Dc(32,zi,t.isLikePositive))("disabled",t.isLikeButtonDisabled),P.Ab(1),P.yc("icon",P.Dc(34,Bi,t.comment?"like-small":"like")),P.Ab(3),P.yc("ngIf",P.rc(22,20,t.likeDropdownMenuHandler.isMenuShown$)),P.Ab(2),P.yc("ngIf",t.isLikePositive&&t.likesInfo.status!==t.LikeStatusPositive.LIKE),P.Ab(1),P.yc("ngIf",t.isBookmarked))},directives:[I.q,I.t,fn.a,cn.a,Li],pipes:[I.b],styles:["[_nghost-%COMP%]{vertical-align:middle}.reaction[_ngcontent-%COMP%], [_nghost-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.reaction[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;font-size:16px}.reaction--comments[_ngcontent-%COMP%]{font-size:13.75px}.reaction--comments[_ngcontent-%COMP%]   .reaction__dislike[_ngcontent-%COMP%], .reaction--comments[_ngcontent-%COMP%]   .reaction__emotion[_ngcontent-%COMP%], .reaction--comments[_ngcontent-%COMP%]   .reaction__like[_ngcontent-%COMP%]{font-size:1.164em}.reaction--comments[_ngcontent-%COMP%]   .reaction__count[_ngcontent-%COMP%]{min-width:1.8em;margin-left:.25em;margin-right:.25em}.reaction__dislike[_ngcontent-%COMP%], .reaction__like[_ngcontent-%COMP%]{cursor:pointer;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin:0;padding:0;line-height:1;vertical-align:top;color:#4c4d4f;font-size:1.5625em;background-color:transparent;border:none;-webkit-transition:color .1s;transition:color .1s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reaction__dislike[_ngcontent-%COMP%]:active, .reaction__dislike[_ngcontent-%COMP%]:focus, .reaction__like[_ngcontent-%COMP%]:active, .reaction__like[_ngcontent-%COMP%]:focus{outline:none}.reaction__dislike[disabled][_ngcontent-%COMP%], .reaction__like[disabled][_ngcontent-%COMP%]{cursor:default}.reaction__like--active[_ngcontent-%COMP%], .reaction__like[_ngcontent-%COMP%]:hover{color:#62faff}.reaction__dislike--active[_ngcontent-%COMP%], .reaction__dislike[_ngcontent-%COMP%]:hover{color:#f34d46}.reaction__emotion[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-left:.4em;margin-right:.4em;vertical-align:middle;font-size:1.5625em}.reaction__emotion[_ngcontent-%COMP%]:first-child{margin-left:0}.reaction__dropdown[_ngcontent-%COMP%] + .reaction__emotion[_ngcontent-%COMP%], .reaction__emotion[_ngcontent-%COMP%]:last-child{margin-right:0}.reaction__dropdown[_ngcontent-%COMP%]{position:relative}.reaction__count[_ngcontent-%COMP%]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;min-width:1.6em;margin-left:.325em;margin-right:.325em;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:middle;font-size:.875em}.likes-count[_ngcontent-%COMP%]{line-height:1;color:hsla(0,0%,100%,.75);font-weight:600;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.likes-count--positive[_ngcontent-%COMP%]{color:#62faff}.likes-count--negative[_ngcontent-%COMP%]{color:#f34d46}.light[_nghost-%COMP%]   .likes-count[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .likes-count[_ngcontent-%COMP%]{color:rgba(23,43,83,.5)}.light[_nghost-%COMP%]   .reaction__dislike[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .reaction__dislike[_ngcontent-%COMP%], .light[_nghost-%COMP%]   .reaction__like[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .reaction__like[_ngcontent-%COMP%]{color:#c4ccd6}.light[_nghost-%COMP%]   .likes-count--positive[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .likes-count--positive[_ngcontent-%COMP%], .light[_nghost-%COMP%]   .reaction__like--active[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .reaction__like--active[_ngcontent-%COMP%], .light[_nghost-%COMP%]   .reaction__like[_ngcontent-%COMP%]:hover, .light   [_nghost-%COMP%]   .reaction__like[_ngcontent-%COMP%]:hover{color:#3d95cf}.light[_nghost-%COMP%]   .likes-count--negative[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .likes-count--negative[_ngcontent-%COMP%], .light[_nghost-%COMP%]   .reaction__dislike--active[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .reaction__dislike--active[_ngcontent-%COMP%], .light[_nghost-%COMP%]   .reaction__dislike[_ngcontent-%COMP%]:hover, .light   [_nghost-%COMP%]   .reaction__dislike[_ngcontent-%COMP%]:hover{color:#ff5b47}"],changeDetection:0}),e}();function Qi(e,t){if(1&e&&P.Rb(0,"jr-avatar",21),2&e){var n=P.pc(2);P.yc("src",n.userProfilePictureUrl)("commentBadge",n.comment.owner.badge)}}function Gi(e,t){if(1&e&&(P.Ub(0),P.Yc(1),P.qc(2,"slice"),P.Wb(3,"span",22),P.Yc(4),P.qc(5,"slice"),P.Vb(),P.Tb()),2&e){var n=P.pc(3);P.Ab(1),P.ad(" ",P.tc(2,2,n.comment.owner.position,0,25)," at "),P.Ab(3),P.Zc(P.tc(5,6,n.comment.owner.job,0,20))}}function qi(e,t){if(1&e&&(P.Ub(0),P.Yc(1),P.qc(2,"slice"),P.Tb()),2&e){var n=P.pc(3);P.Ab(1),P.ad(" ",P.tc(2,1,n.comment.owner.position,0,25)," ")}}function Ki(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"span",22),P.Yc(2),P.qc(3,"slice"),P.Vb(),P.Tb()),2&e){var n=P.pc(3);P.Ab(2),P.Zc(P.tc(3,1,n.comment.owner.job,0,20))}}function Yi(e,t){if(1&e&&(P.Ub(0),P.Wc(1,Gi,6,10,"ng-container",0),P.Wc(2,qi,3,5,"ng-container",0),P.Wc(3,Ki,4,5,"ng-container",0),P.Tb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("ngIf",n.comment.owner.position&&n.comment.owner.job),P.Ab(1),P.yc("ngIf",n.comment.owner.position&&!n.comment.owner.job),P.Ab(1),P.yc("ngIf",n.comment.owner.job&&!n.comment.owner.position)}}function Ji(e,t){if(1&e&&(P.gc(0,Vi,1),P.Sb(1),P.dc()),2&e){var n=P.pc(3);P.Ab(1),P.ec(n.comment.owner.city),P.bc(0)}}function Xi(e,t){if(1&e&&(P.gc(0,Vi,2),P.Sb(1),P.dc()),2&e){var n=P.pc(3);P.Ab(1),P.ec(n.comment.owner.country),P.bc(0)}}function Zi(e,t){if(1&e&&(P.Ub(0),P.gc(1,Vi),P.Wc(2,Ji,2,1,"ng-container",0),P.Wc(3,Xi,2,1,"ng-container",0),P.dc(),P.Tb()),2&e){var n=P.pc(2);P.Ab(2),P.yc("ngIf",n.comment.owner.city),P.Ab(1),P.yc("ngIf",n.comment.owner.country),P.ec(n.comment.owner.level),P.bc(1)}}function eo(e,t){if(1&e&&P.Rb(0,"jr-comment-badge",23),2&e){var n=P.pc(2);P.yc("badge",n.comment.owner.badge)}}Vi=" Level " + "\ufffd0\ufffd" + "" + "\ufffd*2:1\ufffd\ufffd#1:1\ufffd" + ", " + "\ufffd0:1\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd]" + "" + "\ufffd*3:2\ufffd\ufffd#1:2\ufffd" + ", " + "\ufffd0:2\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd]" + "",Vi=P.fc(Vi);var to=function(){return{name:"eye-slash"}};function no(e,t){1&e&&P.Rb(0,"jr-icon",26),2&e&&P.yc("icon",P.Cc(1,to))}var io=function(){return{name:"eye"}};function oo(e,t){1&e&&P.Rb(0,"jr-icon",26),2&e&&P.yc("icon",P.Cc(1,io))}var so=function(e,t){return{"visibility--deleted":e,"visibility--private":t}};function co(e,t){if(1&e&&(P.Wb(0,"span",24),P.Wc(1,no,1,2,"jr-icon",25),P.Wc(2,oo,1,2,"jr-icon",25),P.Vb()),2&e){var n=P.pc(2);P.yc("ngClass",P.Ec(3,so,n.comment.visibilityStatus===n.VisibilityStatus.DELETED,n.comment.visibilityStatus===n.VisibilityStatus.PRIVATE)),P.Ab(1),P.yc("ngIf",n.comment.visibilityStatus===n.VisibilityStatus.DELETED||n.comment.visibilityStatus===n.VisibilityStatus.PRIVATE),P.Ab(1),P.yc("ngIf",n.comment.visibilityStatus===n.VisibilityStatus.PUBLIC)}}var ao=function(e,t){return{"badge--green":e,"badge--orange":t}};function ro(e,t){if(1&e&&(P.Wb(0,"span",27),P.Yc(1),P.Vb()),2&e){var n=P.pc(2);P.yc("ngClass",P.Ec(2,ao,n.comment.owner.subscription==n.UserSubscription.PREMIUM,n.comment.owner.subscription==n.UserSubscription.PREMIUM_PRO)),P.Ab(1),P.ad(" ",n.UserSubscriptionDisplayNames[n.comment.owner.subscription]," ")}}function mo(e,t){if(1&e&&P.Rb(0,"jr-comment-attribute",28),2&e){var n=P.pc(2);P.yc("attributes",n.comment.attributes)}}function uo(e,t){if(1&e&&(P.Wb(0,"div",29),P.Rb(1,"jr-comment-menu",30),P.Vb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("comment",n.comment)}}var lo,bo,ho,fo,po,go,Co,vo=function(e){return{"comment__body--new":e}},Oo=function(e,t){return{"view-text--large":e,"view-text--extra-large":t}};function yo(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"div",31),P.Rb(2,"div",32),P.Vb(),P.Tb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("ngClass",P.Dc(3,vo,n.isCommentNew)),P.Ab(1),P.yc("ngClass",P.Ec(5,Oo,n.isLargeText,n.isExtraLargeText))("jrHtmlWithPrismProcessing",n.comment.message)}}function So(e,t){if(1&e&&(P.Ub(0),P.ac(1,ho),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitCharactersRemaining),P.bc(1)}}function _o(e,t){if(1&e&&(P.Ub(0),P.ac(1,fo),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitCharactersRemaining),P.bc(1)}}function Mo(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"div",38),P.Wc(2,So,2,1,"ng-container",0),P.Wc(3,_o,2,1,"ng-container",0),P.Vb(),P.Tb()),2&e){var n=P.pc(3);P.Ab(2),P.yc("ngIf",1!==n.messageLimitCharactersRemaining),P.Ab(1),P.yc("ngIf",1===n.messageLimitCharactersRemaining)}}function To(e,t){if(1&e&&(P.Ub(0),P.ac(1,po),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitExceededBy),P.bc(1)}}function Io(e,t){if(1&e&&(P.Ub(0),P.ac(1,go),P.Tb()),2&e){var n=P.pc(4);P.Ab(1),P.ec(n.messageLimitExceededBy),P.bc(1)}}function Po(e,t){if(1&e&&(P.Ub(0),P.Wb(1,"div",39),P.Wc(2,To,2,1,"ng-container",0),P.Wc(3,Io,2,1,"ng-container",0),P.Vb(),P.Tb()),2&e){var n=P.pc(3);P.Ab(2),P.yc("ngIf",1!==n.messageLimitCharactersRemaining),P.Ab(1),P.yc("ngIf",1===n.messageLimitCharactersRemaining)}}function Eo(e,t){if(1&e){var n=P.Xb();P.Rb(0,"jr-rich-editor",33),P.Wb(1,"div",34),P.Wc(2,Mo,4,2,"ng-container",0),P.Wc(3,Po,4,2,"ng-container",0),P.Wb(4,"div",35),P.Wb(5,"jr-button",36),P.lc("onClick",(function(){return P.Mc(n),P.pc(2).closeEditPanel()})),P.ac(6,lo),P.Vb(),P.Wb(7,"jr-button",37),P.lc("onClick",(function(){return P.Mc(n),P.pc(2).editComment()})),P.ac(8,bo),P.Vb(),P.Vb(),P.Vb()}if(2&e){var i=P.pc(2);P.yc("formControl",i.editedMessageFormControl)("autosize",!0)("thumbnailImageOnly",!0)("insertImageType",i.ImageTypeSelect.COMMENT),P.Ab(2),P.yc("ngIf",i.editedMessageFormControl.value.length>.9*i.messageLimit&&i.editedMessageFormControl.value.length<=i.messageLimit),P.Ab(1),P.yc("ngIf",i.editedMessageFormControl.value.length>i.messageLimit),P.Ab(2),P.yc("variant","link")("size","sm-wide")("underline",!0),P.Ab(2),P.yc("variant","success")("size","sm-wide")("bold",!0)("disabled",i.editedMessageFormControl.invalid)}}function ko(e,t){if(1&e){var n=P.Xb();P.Wb(0,"div",45),P.Wb(1,"span",46),P.lc("click",(function(){return P.Mc(n),P.pc(3).answerToThisComment()})),P.ac(2,Co),P.Vb(),P.Vb()}}function wo(e,t){if(1&e&&(P.Wb(0,"div",40),P.Wb(1,"div",41),P.Wc(2,ko,3,0,"div",42),P.Wb(3,"div",43),P.Rb(4,"jr-likes-panel",44),P.Vb(),P.Vb(),P.Vb()),2&e){var n=P.pc().ngIf,i=P.pc();P.Ab(2),P.yc("ngIf",n.isMeAuthorized&&!i.replyData),P.Ab(2),P.yc("discussion",i.discussionInfo)("comment",i.comment)}}function Ao(e,t){if(1&e&&P.Rb(0,"jr-comment",49),2&e){var n=t.$implicit,i=P.pc(3);P.yc("comment",n)("lastTime",i.lastTime)}}function Do(e,t){if(1&e&&(P.Wb(0,"div",47),P.Wc(1,Ao,1,2,"jr-comment",48),P.Vb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("ngForOf",n.comment.childrenComments)}}function Lo(e,t){if(1&e&&(P.Wb(0,"div",50),P.Rb(1,"jr-my-reply",51),P.Vb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("replyData",n.replyData)("autosize",!0)}}lo=" Cancel ",bo=" Edit ",ho=" " + "\ufffd0\ufffd" + " characters remaining ",fo=" " + "\ufffd0\ufffd" + " character remaining ",po=" Limit exceeded by " + "\ufffd0\ufffd" + " characters ",go=" Limit exceeded by " + "\ufffd0\ufffd" + " character ",Co="Reply";var Ro=function(e,t,n,i,o){return{verified:e,claim:t,hidden:n,deleted:i,erased:o}};function No(e,t){if(1&e){var n=P.Xb();P.Ub(0),P.Wb(1,"div",1),P.Wb(2,"a",2),P.lc("onReadyToLoad",(function(){return P.Mc(n),P.pc().isCommentInUserViewport=!0})),P.Wc(3,Qi,1,2,"jr-avatar",3),P.Vb(),P.Wb(4,"div",4),P.Wb(5,"div",5),P.Wb(6,"a",6),P.Yc(7),P.Vb(),P.Wb(8,"span",7),P.Wc(9,Yi,4,3,"ng-container",8),P.Wc(10,Zi,4,3,"ng-template",null,9,P.Xc),P.Vb(),P.Wc(12,eo,1,1,"jr-comment-badge",10),P.Wc(13,co,3,6,"span",11),P.Wc(14,ro,2,5,"span",12),P.Vb(),P.Wb(15,"div",13),P.Wb(16,"span",14),P.Yc(17),P.Vb(),P.Wc(18,mo,1,1,"jr-comment-attribute",15),P.Wc(19,uo,2,1,"div",16),P.Vb(),P.Vb(),P.Wc(20,yo,3,8,"ng-container",8),P.Wc(21,Eo,9,13,"ng-template",null,17,P.Xc),P.Wc(23,wo,5,3,"div",18),P.Wc(24,Do,2,1,"div",19),P.Wc(25,Lo,2,2,"div",20),P.Vb(),P.Tb()}if(2&e){var i=t.ngIf,o=P.Jc(11),s=P.Jc(22),c=P.pc();P.Ab(1),P.yc("ngClass",P.Hc(18,Ro,i.isMeModerator&&c.comment.status===c.CommentStatus.VERIFIED,i.isMeModerator&&c.comment.status===c.CommentStatus.CLAIM,i.isMeModerator&&c.comment.visibilityStatus===c.VisibilityStatus.PRIVATE,i.isMeModerator&&c.comment.visibilityStatus===c.VisibilityStatus.DELETED,c.comment.isErased)),P.Ab(1),P.yc("href",c.userProfileHref,P.Pc),P.Ab(1),P.yc("ngIf",c.isCommentInUserViewport),P.Ab(3),P.yc("href",c.userProfileHref,P.Pc),P.Ab(1),P.Zc(c.comment.owner.displayName),P.Ab(2),P.yc("ngIf",c.comment.owner.position||c.comment.owner.job)("ngIfElse",o),P.Ab(3),P.yc("ngIf",c.comment.owner.badge),P.Ab(1),P.yc("ngIf",i.isMeModerator),P.Ab(1),P.yc("ngIf",c.comment.owner.subscription),P.Ab(3),P.Zc(c.localizedTime),P.Ab(1),P.yc("ngIf",c.comment.attributes.answer||c.comment.attributes.useful),P.Ab(1),P.yc("ngIf",i.isMeAuthorized&&!c.comment.isErased),P.Ab(1),P.yc("ngIf",!c.isEditing)("ngIfElse",s),P.Ab(3),P.yc("ngIf",!c.isEditing),P.Ab(1),P.yc("ngIf",c.comment.childrenComments&&c.comment.childrenComments.length>0),P.Ab(1),P.yc("ngIf",c.replyData)}}var xo,jo,Uo,Vo,Wo,Fo,Bo,$o,zo,Ho=function(){function e(e,t,n,i,o,s,c,a,r,m){this.logger=e,this.dateTimeService=t,this.meProfileService=n,this.commentsService=i,this.discussionService=o,this.commentsAdminService=s,this.changeDetector=c,this.imageSizeSelectService=a,this.contentLanguageUrlBuilderService=r,this.commentService=m,this.ImageTypeSelect=Ae.a,this.CommentStatus=Yt,this.VisibilityStatus=Qt.a,this.UserSubscription=zt,this.UserSubscriptionDisplayNames=Ht,this.isCommentInUserViewport=!1,this.isDestroyed$=new R.Subject,this.logger.debug(this.constructor.name+" is created.")}return Object.defineProperty(e.prototype,"comment",{get:function(){return this._comment},set:function(e){if(this._comment=e,this.localizedTime=this.dateTimeService.getRelativeDateTimeString(e.time),this.userProfileHref=this.contentLanguageUrlBuilderService.buildHrefUrl(qt.a.displayServerAddress+$t.a.userProfileHref,[{key:"{userId}",value:e.owner.id.toString()}]),this.userProfilePictureUrl=this.commentsService.generateUserProfilePictureUrl(e),e){var t=Object(on.b)(e.message);"large"===t?(this.isLargeText=!0,this.isExtraLargeText=!1):"extra-large"===t?(this.isLargeText=!1,this.isExtraLargeText=!0):(this.isLargeText=!1,this.isExtraLargeText=!1)}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.commentService.commentStatus$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.comment.status=t,e.changeDetector.markForCheck()})),this.commentService.commentVisibilityStatus$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.comment.visibilityStatus=t,e.changeDetector.markForCheck()})),this.commentPageData$=this.loadCommentPageData().pipe(Object(Xt.a)((function(){e.discussionInfo=e.discussionService.getDiscussionInfo()}))),this.commentsService.editMode$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.comment.id===t.id&&e.showEditPanel()})),this.comment.parentCommentId||this.commentsService.replyData$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.replyData=t&&t.parentCommentId===e.comment.id?t:null}))},e.prototype.ngDoCheck=function(){this._comment.childrenComments.length&&this.changeDetector.markForCheck()},e.prototype.ngOnChanges=function(){this.isCommentNew=this.lastTime?this._comment.time>this.lastTime&&!this._comment.isCommentAddedByMe:this._comment.isCommentHighlighted},e.prototype.loadCommentPageData=function(){return Object(Zt.combineLatest)(this.meProfileService.meProfile$,this.meProfileService.isUserModerator()).pipe(Object(Te.a)((function(e){var t=Object(F.f)(e,2),n=t[0],i=t[1],o=new Ee;return o.isMeAuthorized=!!n,o.isMeModerator=i,o})))},e.prototype.answerToThisComment=function(){this.commentsService.openReplyToCommentPanel(this.comment)},e.prototype.showEditPanel=function(){var e=this;this.editedMessageFormControl=new Je.g(this.comment.message.replace(/data-src/g,"src"),[Je.C.required,Je.C.maxLength(this.commentsService.COMMENT_LENGTH_LIMIT)]),this.messageLimit=this.commentsService.COMMENT_LENGTH_LIMIT,this.editedMessageFormControl.valueChanges.subscribe((function(t){e.messageLimitCharactersRemaining=e.messageLimit-t.length,e.messageLimitExceededBy=t.length-e.messageLimit})),this.isEditing=!0},e.prototype.editComment=function(){var e=this;this.comment.isMeOwner?this.commentsService.sendEditRequest(this.comment,this.editedMessageFormControl.value).subscribe((function(t){t&&(e.closeEditPanel(),e.changeDetector.markForCheck())})):this.commentsAdminService.sendEditRequest(this.comment,this.editedMessageFormControl.value,null,null).subscribe((function(t){t&&(e.closeEditPanel(),e.changeDetector.markForCheck())}))},e.prototype.closeEditPanel=function(){this.isEditing=!1},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(Gt.a),P.Qb(we.a),P.Qb(D.a),P.Qb(L.a),P.Qb(Jt.a),P.Qb(P.h),P.Qb(et.a),P.Qb(tn.a),P.Qb(nn))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comment"]],inputs:{lastTime:"lastTime",comment:"comment"},features:[P.zb([nn]),P.yb],decls:2,vars:3,consts:[[4,"ngIf"],[1,"comment",3,"ngClass"],["jrLazyLoad","","target","_blank","tabindex","-1",1,"comment__avatar",3,"href","onReadyToLoad"],[3,"src","commentBadge",4,"ngIf"],[1,"comment__head"],[1,"head-left"],["target","_blank",1,"user",3,"href"],[1,"more-info"],[4,"ngIf","ngIfElse"],["userLevel",""],[3,"badge",4,"ngIf"],["class","visibility",3,"ngClass",4,"ngIf"],["class","badge badge--xs badge--uppercase",3,"ngClass",4,"ngIf"],[1,"head-right"],[1,"date"],[3,"attributes",4,"ngIf"],["class","more-setting",4,"ngIf"],["commentEditor",""],["class","comment__foot",4,"ngIf"],["class","comment-children",4,"ngIf"],["class","comment-answer",4,"ngIf"],[3,"src","commentBadge"],[1,"more-info__company"],[3,"badge"],[1,"visibility",3,"ngClass"],[3,"icon",4,"ngIf"],[3,"icon"],[1,"badge","badge--xs","badge--uppercase",3,"ngClass"],[3,"attributes"],[1,"more-setting"],[3,"comment"],[1,"comment__body",3,"ngClass"],[1,"view-text",3,"ngClass","jrHtmlWithPrismProcessing"],[3,"formControl","autosize","thumbnailImageOnly","insertImageType"],[1,"row"],[1,"col","text-right","comment-edit-buttons"],[3,"variant","size","underline","onClick"],[3,"variant","size","bold","disabled","onClick"],[1,"col-12","col-sm-auto","left-symbols"],[1,"col-12","col-sm-auto","excess-symbols"],[1,"comment__foot"],[1,"row","no-gutters"],["class","col",4,"ngIf"],[1,"col","text-right"],[3,"discussion","comment"],[1,"col"],[1,"answer",3,"click"],[1,"comment-children"],[3,"comment","lastTime",4,"ngFor","ngForOf"],[3,"comment","lastTime"],[1,"comment-answer"],[3,"replyData","autosize"]],template:function(e,t){1&e&&(P.Wc(0,No,26,24,"ng-container",0),P.qc(1,"async")),2&e&&P.yc("ngIf",P.rc(1,1,t.commentPageData$))},directives:[I.t,I.q,st.a,ct.a,sn.a,cn.a,an.a,Si,_i.a,it.a,Je.q,Je.h,at.a,Hi,I.s,e,Bt],pipes:[I.b,I.E],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     .jr-image-wrap.float-left{float:none!important;display:block}jr-comment[_ngcontent-%COMP%]{margin-top:11px}jr-my-reply[_ngcontent-%COMP%]{margin-left:-50px}@media (min-width:768px){jr-my-reply[_ngcontent-%COMP%]{margin-left:0}}.comment[_ngcontent-%COMP%]{display:block;position:relative;padding-left:50px}.erased[_ngcontent-%COMP%]   .comment__body[_ngcontent-%COMP%]{font-style:italic;font-weight:400;color:#636365}.comment__avatar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:40px;height:40px}.comment__head[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:1;margin-bottom:3px}@media (min-width:768px){.comment__head[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}}.head-left[_ngcontent-%COMP%]{display:inline;line-height:1;font-size:16px}.head-left[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .head-left[_ngcontent-%COMP%] > jr-comment-badge[_ngcontent-%COMP%], .head-left[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-right:6px}@media (min-width:992px){.head-left[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .head-left[_ngcontent-%COMP%] > jr-comment-badge[_ngcontent-%COMP%], .head-left[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-right:7px}}jr-comment-badge[_ngcontent-%COMP%]{vertical-align:middle}.head-right[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-ms-flex-item-align:end;align-self:flex-end;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;min-height:17px;margin-top:2px;line-height:1;white-space:nowrap;text-align:right}.head-right[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .head-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], jr-comment-attribute[_ngcontent-%COMP%]{margin-right:6px}@media (min-width:992px){.head-right[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .head-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], jr-comment-attribute[_ngcontent-%COMP%]{margin-right:7px}}.head-right[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:last-child, .head-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child, jr-comment-attribute[_ngcontent-%COMP%]:last-child{margin-right:0}.head-right[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}@media (min-width:768px){.head-right[_ngcontent-%COMP%]{display:block;margin-top:0;text-align:right}.head-right[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .head-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], jr-comment-attribute[_ngcontent-%COMP%]{margin-left:6px;margin-right:0}}.more-setting[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:baseline;line-height:1;font-size:14px}@media (min-width:768px){.more-setting[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-left:6px;vertical-align:baseline;line-height:1;font-size:14px}}.comment__head[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .comment__head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], jr-comment-attribute[_ngcontent-%COMP%]{display:inline-block;vertical-align:baseline}.user[_ngcontent-%COMP%]{font-size:14px;line-height:1;font-weight:700;color:#fff;text-decoration:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.user[_ngcontent-%COMP%]:hover{text-decoration:underline}.date[_ngcontent-%COMP%], .more-info[_ngcontent-%COMP%]{line-height:1;font-size:12px;color:#7b7b7c;right:0}.more-info__company[_ngcontent-%COMP%]{font-weight:600;color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.light[_nghost-%COMP%]   .date[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .date[_ngcontent-%COMP%], .light[_nghost-%COMP%]   .more-info[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .more-info[_ngcontent-%COMP%]{color:rgba(23,43,83,.7)}.light[_nghost-%COMP%]   .more-info__company[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .more-info__company[_ngcontent-%COMP%]{color:#172b53}.visibility[_ngcontent-%COMP%]{font-size:12px;line-height:1.42;color:#62faff}.visibility--private[_ngcontent-%COMP%]{color:#faa033}.visibility--deleted[_ngcontent-%COMP%]{color:#f34d47}.light[_nghost-%COMP%]   .visibility[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .visibility[_ngcontent-%COMP%]{color:#3d95cf}.light[_nghost-%COMP%]   .visibility--private[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .visibility--private[_ngcontent-%COMP%]{color:rgba(23,43,83,.5)}.comment__body[_ngcontent-%COMP%]{overflow:hidden;font-size:14px;line-height:1.22;color:#fff;padding:11px 9px 10px;margin:0;border:1px solid #636365;border-radius:2px;-webkit-backface-visibility:hidden;backface-visibility:hidden}.comment__body[_ngcontent-%COMP%]     pre.line-numbers{margin-top:7px;margin-bottom:7px}.comment__body--new[_ngcontent-%COMP%]{border-color:#7bc3f1}.comment.verified[_ngcontent-%COMP%]   .comment__body[_ngcontent-%COMP%]{border-left:4px solid #62faff}.comment.claim[_ngcontent-%COMP%]   .comment__body[_ngcontent-%COMP%]{border-left:4px solid #f34d47}.comment.deleted[_ngcontent-%COMP%], .comment.hidden[_ngcontent-%COMP%]{opacity:.5}.comment.deleted[_ngcontent-%COMP%]:hover, .comment.hidden[_ngcontent-%COMP%]:hover{opacity:1}.comment__foot[_ngcontent-%COMP%]{padding:5px 0 0;margin:0;line-height:1}.comment__foot[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{margin-top:7px}.comment__foot[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%], .comment__foot[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{vertical-align:top}.comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;font-size:12px;line-height:1;color:#7b7b7c;text-decoration:none;padding:0;margin:0;cursor:pointer}.comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]:hover{text-decoration:none;color:#62faff}.view-text[_ngcontent-%COMP%]{word-wrap:break-word;white-space:pre-wrap;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.view-text--large[_ngcontent-%COMP%]{font-size:2em}.view-text--extra-large[_ngcontent-%COMP%]{font-size:3em}.view-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.view-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.comment-edit-buttons[_ngcontent-%COMP%]{margin-top:10px}.excess-symbols[_ngcontent-%COMP%], .left-symbols[_ngcontent-%COMP%]{font-size:.778em;padding-top:15px}.excess-symbols[_ngcontent-%COMP%]{color:#ff7337}@media (max-width:767px){.comment-children[_ngcontent-%COMP%]{margin-left:-25px}}.comment-answer[_ngcontent-%COMP%]{margin-top:10px}.comment[_ngcontent-%COMP%]     jr-likes-menu, jr-comment-menu[_ngcontent-%COMP%]{margin-top:3px}.menu-button[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px;font-size:13px}.light[_nghost-%COMP%]   .user[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .user[_ngcontent-%COMP%]{color:#172b53}.light[_nghost-%COMP%]   .comment__body[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comment__body[_ngcontent-%COMP%]{border:1px solid #d5dae2;color:#172b53;background:#fff}.light[_nghost-%COMP%]   .comment__body--new[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comment__body--new[_ngcontent-%COMP%]{border-color:#7bc3f1}.light[_nghost-%COMP%]   .comment.verified[_ngcontent-%COMP%] > .comment__body[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comment.verified[_ngcontent-%COMP%] > .comment__body[_ngcontent-%COMP%]{border-left:4px solid #43aaeb}.light[_nghost-%COMP%]   .comment.claim[_ngcontent-%COMP%] > .comment__body[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comment.claim[_ngcontent-%COMP%] > .comment__body[_ngcontent-%COMP%]{border-left:4px solid #ff6c60}.light[_nghost-%COMP%]   .comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{color:#7a869a}.light[_nghost-%COMP%]   .comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]:active, .light   [_nghost-%COMP%]   .comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]:active, .light[_nghost-%COMP%]   .comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]:hover, .light   [_nghost-%COMP%]   .comment__foot[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]:hover{color:#172b53}"],data:{animation:[en.a]},changeDetection:0}),e}(),Qo=n("oO/G");function Go(e,t){if(1&e&&P.Rb(0,"jr-comment",11),2&e){var n=t.$implicit,i=P.pc(3);P.yc("comment",n)("@fade",!i.animationDisabled)("lastTime",i.discussion.userDiscussionInfo?i.discussion.userDiscussionInfo.lastTime:null)}}function qo(e,t){if(1&e&&(P.Ub(0),P.Wc(1,Go,1,3,"jr-comment",10),P.Tb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("ngForOf",n.comments)}}zo=" Load more comments ";var Ko,Yo=function(){return{name:"reload"}};function Jo(e,t){if(1&e){var n=P.Xb();P.Wb(0,"div",12),P.Wb(1,"jr-button",13),P.lc("onClick",(function(){return P.Mc(n),P.pc(2).loadMoreComments()})),P.ac(2,zo),P.Vb(),P.Vb()}if(2&e){var i=P.pc(2);P.Ab(1),P.yc("variant","info")("size","md")("icon",P.Cc(4,Yo))("isIconSpinning",i.isLoadingMoreComments)}}function Xo(e,t){if(1&e&&(P.Wb(0,"div",3),P.Wb(1,"div",4),P.Rb(2,"jr-comments-head",5),P.Vb(),P.Wb(3,"div",6),P.Rb(4,"jr-my-reply"),P.Vb(),P.Wb(5,"div",7),P.Wc(6,qo,2,1,"ng-container",8),P.Vb(),P.Wc(7,Jo,3,5,"div",9),P.Vb()),2&e){var n=P.pc(),i=P.Jc(4);P.Ab(2),P.yc("discussion",n.discussion),P.Ab(4),P.yc("ngIf",n.comments.length)("ngIfElse",i),P.Ab(1),P.yc("ngIf",n.isMoreAvailable)}}function Zo(e,t){1&e&&P.Rb(0,"jr-loader")}Ko="This page doesn't have any comments yet";var es=function(){return{name:"comments"}};function ts(e,t){1&e&&(P.Wb(0,"div",14),P.Wb(1,"div",15),P.Rb(2,"jr-icon",16),P.Vb(),P.Wb(3,"div",17),P.Wb(4,"span",18),P.ac(5,Ko),P.Vb(),P.Vb(),P.Vb()),2&e&&(P.Ab(2),P.yc("icon",P.Cc(1,es)))}var ns,is,os,ss=function(){function e(e,t,n){this.logger=e,this.commentsService=t,this.changeDetector=n,this.isDestroyed$=new De.a,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){this.commentsMainPageData&&(this.comments=this.commentsMainPageData.comments,this.commentsViewRequest=this.commentsMainPageData.commentsViewRequest,this.isMoreAvailable=this.commentsMainPageData.isMoreAvailable)},e.prototype.loadMoreComments=function(){var e=this;if(this.isLoadingMoreComments=!0,this.animationDisabled=!0,this.changeDetector.markForCheck(),this.commentsViewRequest.order!==w.a.POPULAR)this.commentsService.loadMoreComments(!1).subscribe((function(){return e.isLoadingMoreComments=!1}));else{var t=new _e.a(w.a.POPULAR,this.commentsViewRequest.limit+10);this.commentsService.initCommentLoad(t,this.discussion).subscribe((function(){return e.isLoadingMoreComments=!1}))}},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(D.a),P.Qb(P.h))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comments-main-view"]],inputs:{discussion:"discussion",commentsMainPageData:"commentsMainPageData"},features:[P.yb],decls:5,vars:2,consts:[["class","comments",4,"ngIf","ngIfElse"],["loading",""],["noComments",""],[1,"comments"],[1,"comments__head"],[3,"discussion"],[1,"comments__my-reply"],[1,"comments__feed"],[4,"ngIf","ngIfElse"],["class","text-center comments-more",4,"ngIf"],[3,"comment","lastTime",4,"ngFor","ngForOf"],[3,"comment","lastTime"],[1,"text-center","comments-more"],[3,"variant","size","icon","isIconSpinning","onClick"],[1,"no-content"],[1,"no-content__head"],[3,"icon"],[1,"no-content__body"],[1,"text-uppercase"]],template:function(e,t){if(1&e&&(P.Wc(0,Xo,8,4,"div",0),P.Wc(1,Zo,1,0,"ng-template",null,1,P.Xc),P.Wc(3,ts,6,2,"ng-template",null,2,P.Xc)),2&e){var n=P.Jc(2);P.yc("ngIf",t.comments)("ngIfElse",n)}},directives:[I.t,Ye,Bt,I.s,Ho,at.a,Qo.a,cn.a],styles:["[_nghost-%COMP%]{display:block}jr-comment[_ngcontent-%COMP%]{margin-bottom:30px}jr-comment[_ngcontent-%COMP%]:last-child{margin-bottom:0}.comments__head[_ngcontent-%COMP%], .comments__my-reply[_ngcontent-%COMP%]{margin-bottom:30px}"],data:{animation:[Le.a]},changeDetection:0}),e}(),cs=n("gI3B"),as=["scrollBlock"];function rs(e,t){1&e&&(P.Wb(0,"div",11),P.Rb(1,"jr-loader",12),P.Vb()),2&e&&(P.Ab(1),P.yc("absolute",!0))}function ms(e,t){1&e&&(P.Wb(0,"div",18),P.Yc(1,' i18n="@@commentsChatViewLabelToday">Today '),P.Vb())}function us(e,t){if(1&e&&(P.Ub(0),P.Wc(1,ms,2,0,"div",17),P.Tb()),2&e){var n=P.pc().$implicit,i=P.pc(3);P.Ab(1),P.yc("ngIf",i.firstTodayCommentId===n.id)}}function ls(e,t){if(1&e&&(P.Ub(0),P.Rb(1,"jr-comment",16),P.Wc(2,us,2,1,"ng-container",6),P.Tb()),2&e){var n=t.$implicit,i=P.pc(3);P.Ab(1),P.yc("@fade",!0)("comment",n)("lastTime",i.discussion.userDiscussionInfo?i.discussion.userDiscussionInfo.lastTime:null),P.Ab(1),P.yc("ngIf",i.commentsViewRequest.order!==i.CommentsOrder.POPULAR)}}function ds(e,t){if(1&e&&(P.Wb(0,"div",14),P.Wc(1,ls,3,4,"ng-container",15),P.Vb()),2&e){var n=P.pc(2);P.Ab(1),P.yc("ngForOf",n.comments)}}function bs(e,t){if(1&e&&(P.Ub(0),P.Wc(1,ds,2,1,"div",13),P.Tb()),2&e){var n=P.pc(),i=P.Jc(11);P.Ab(1),P.yc("ngIf",n.comments.length)("ngIfElse",i)}}os="There are no messages in this chat.";var hs=function(){return{name:"comments"}};function fs(e,t){1&e&&(P.Wb(0,"div",19),P.Wb(1,"div",20),P.Rb(2,"jr-icon",21),P.Vb(),P.Wb(3,"div",22),P.Wb(4,"span",23),P.ac(5,os),P.Vb(),P.Vb(),P.Vb()),2&e&&(P.Ab(2),P.yc("icon",P.Cc(1,hs)))}var ps,gs=function(){function e(e,t,n){this.logger=e,this.commentsService=t,this.cdr=n,this.DELAY_FOR_RENDERING_COMMENTS_WITH_ANIMATION=700,this.DELAY_FOR_RENDERING_COMMENTS_LIST=260,this.CommentsOrder=w.a,this.isDestroyed$=new De.a,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnChanges=function(){this.commentsMainPageData&&(this.commentsMainPageData.commentsViewRequest!==this.commentsViewRequest&&this.scrollCommentsBottom(),this.commentsMainPageData.comments&&(this.comments=this.reverseComments(this.commentsMainPageData.comments)),this.commentsViewRequest=this.commentsMainPageData.commentsViewRequest,this.isMoreAvailable=this.commentsMainPageData.isMoreAvailable)},e.prototype.ngOnInit=function(){},e.prototype.onScrollComments=function(e){if(!this.isLoadingMoreComments){var t=e.target,n=t.scrollTop,i=n<this.commentsCurrentScrollPosition,o=t.scrollHeight>t.clientHeight;this.commentsCurrentScrollPosition=n,this.isMoreAvailable&&o&&i&&n<200&&!this.isLoadingMoreComments&&this.loadMoreComments()}},e.prototype.reverseComments=function(e){var t=this,n=[];return this.hasOldComment=!1,this.hasTodayComment=!1,this.firstTodayCommentId=null,e.forEach((function(e,i,o){t.checkIfTodayDividerNeedToBeShown(e),n.push(o[o.length-1-i])})),n},e.prototype.checkIfTodayDividerNeedToBeShown=function(e){var t=(new Date).setHours(0,0,0,0),n=new Date(e.time).setHours(0,0,0,0);this.hasTodayComment||(this.hasTodayComment=t===n),this.hasOldComment||(this.hasOldComment=t!==n),this.hasTodayComment&&this.hasOldComment&&!this.firstTodayCommentId&&(this.firstTodayCommentId=e.id)},e.prototype.loadMoreComments=function(){var e=this;if(this.isLoadingMoreComments=!0,this.cdr.markForCheck(),this.commentsViewRequest.order===w.a.POPULAR){var t=new _e.a(w.a.POPULAR,this.commentsViewRequest.limit+10);this.commentsService.initCommentLoad(t,this.discussion).subscribe((function(){return e.scrollToPositionBeforeLoadComments()}))}else this.commentsService.loadMoreComments(!0).subscribe((function(){return e.scrollToPositionBeforeLoadComments()}))},e.prototype.scrollToPositionBeforeLoadComments=function(){var e=this,t=this.scrollBlock.nativeElement,n=t.scrollTop,i=t.scrollHeight;Object(cs.a)(this.DELAY_FOR_RENDERING_COMMENTS_WITH_ANIMATION).pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(){t.scrollTop=t.scrollHeight-i+n,e.isLoadingMoreComments=!1,e.cdr.markForCheck()}))},e.prototype.scrollCommentsBottom=function(){var e=this;Object(cs.a)(this.DELAY_FOR_RENDERING_COMMENTS_LIST).pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(){var t=e.scrollBlock.nativeElement;t.scrollTop=t.scrollHeight-t.clientHeight+30,e.cdr.markForCheck()}))},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(D.a),P.Qb(P.h))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comments-chat-view"]],viewQuery:function(e,t){var n;1&e&&P.Tc(as,!0),2&e&&P.Ic(n=P.mc())&&(t.scrollBlock=n.first)},inputs:{discussion:"discussion",commentsMainPageData:"commentsMainPageData"},features:[P.yb],decls:12,vars:5,consts:[[1,"comments-chat-view"],[3,"discussion","chatView"],[1,"comments-chat-view__comments-container","comments","vertical-gutter-bottom"],[1,"comments-chat-view__list",3,"scroll"],["scrollBlock",""],["class","comments-chat-view__loader",4,"ngIf"],[4,"ngIf"],[1,"comments-chat-view__reply"],[1,"comments-chat-view__editor"],[3,"animationDisabled"],["noComments",""],[1,"comments-chat-view__loader"],[3,"absolute"],["class","comments-chat-view__list-container",4,"ngIf","ngIfElse"],[1,"comments-chat-view__list-container"],[4,"ngFor","ngForOf"],[3,"comment","lastTime"],["class","comment-date-divider",4,"ngIf"],[1,"comment-date-divider"],[1,"no-content"],[1,"no-content__head"],[3,"icon"],[1,"no-content__body"],[1,"text-uppercase"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Rb(1,"jr-comments-head",1),P.Wb(2,"div",2),P.Wb(3,"div",3,4),P.lc("scroll",(function(e){return t.onScrollComments(e)})),P.Wc(5,rs,2,1,"div",5),P.Wc(6,bs,2,2,"ng-container",6),P.Vb(),P.Wb(7,"div",7),P.Wb(8,"div",8),P.Rb(9,"jr-my-reply",9),P.Vb(),P.Vb(),P.Vb(),P.Vb(),P.Wc(10,fs,6,2,"ng-template",null,10,P.Xc)),2&e&&(P.Ab(1),P.yc("discussion",t.discussion)("chatView",!0),P.Ab(4),P.yc("ngIf",t.isLoadingMoreComments),P.Ab(1),P.yc("ngIf",t.comments),P.Ab(3),P.yc("animationDisabled",!0))},directives:[Ye,I.t,Bt,Qo.a,I.s,Ho,cn.a],styles:['[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%}.comments-chat-view[_ngcontent-%COMP%]{width:100%}.comments-chat-view__comments-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;margin-bottom:0!important;position:relative}.comments-chat-view__loader[_ngcontent-%COMP%]{position:relative;height:100px;margin-bottom:10px;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;-ms-flex-preferred-size:auto;flex-basis:auto}jr-comment[_ngcontent-%COMP%]{margin-top:30px}.comments-chat-view__reply[_ngcontent-%COMP%]{padding:28px 30px 30px;background-color:#1f2023;-webkit-box-shadow:0 -5px 15px 0 rgba(0,0,0,.4);box-shadow:0 -5px 15px 0 rgba(0,0,0,.4)}.comments-chat-view__editor[_ngcontent-%COMP%]{max-width:760px;margin-left:auto;margin-right:auto}.comments-chat-view__list[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}@media (max-width:1200px){.comments-chat-view__list[_ngcontent-%COMP%]{padding:0 30px}}@media (max-width:400px){.comments-chat-view__list[_ngcontent-%COMP%]{padding:0 20px}}.comments-chat-view__list-container[_ngcontent-%COMP%]{max-width:760px;margin:30px auto}.comment-date-divider[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:700;font-size:14px;color:#7a869a;margin:35px 0}.comment-date-divider[_ngcontent-%COMP%]:after, .comment-date-divider[_ngcontent-%COMP%]:before{content:"";width:100%;height:0;border-bottom:1px solid #d5dae2}.comment-date-divider[_ngcontent-%COMP%]:before{margin-right:10px}.comment-date-divider[_ngcontent-%COMP%]:after{margin-left:10px}.light[_nghost-%COMP%]   .comments-chat-view__reply[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .comments-chat-view__reply[_ngcontent-%COMP%]{background:#fbfcfd;border-top:1px solid #d5dae2;-webkit-box-shadow:none;box-shadow:none}'],changeDetection:0}),e}(),Cs=n("RH4t"),vs=n("l6eZ");function Os(e,t){1&e&&(P.Ub(0),P.Yc(1," \u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),P.Rb(2,"br"),P.Yc(3,"\u0432 \u043f\u043e\u0441\u0442 (\u0440\u0430\u0437\u0434\u0435\u043b \u0424\u043e\u0440\u0443\u043c) "),P.Tb())}function ys(e,t){1&e&&(P.Ub(0),P.Yc(1," \u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),P.Rb(2,"br"),P.Yc(3,"\u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u043e\u0441\u0442 (\u0440\u0430\u0437\u0434\u0435\u043b \u0424\u043e\u0440\u0443\u043c) "),P.Tb())}function Ss(e,t){1&e&&(P.Ub(0),P.Rb(1,"input",14),P.Tb())}function _s(e,t){1&e&&(P.Ub(0),P.Rb(1,"input",15),P.Tb())}function Ms(e,t){if(1&e){var n=P.Xb();P.Wb(0,"li",11),P.Wb(1,"jr-button",16),P.lc("click",(function(){P.Mc(n);var e=P.pc().ngIf;return P.pc().convertToPost(e.commentId)})),P.Yc(2," \u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u043c "),P.Vb(),P.Vb()}if(2&e){var i=P.pc(2);P.Ab(1),P.yc("variant","info-alt")("size","sm")("disabled",i.commentManipulationForm.invalid)}}function Ts(e,t){if(1&e){var n=P.Xb();P.Wb(0,"li",11),P.Wb(1,"jr-button",16),P.lc("click",(function(){P.Mc(n);var e=P.pc().ngIf;return P.pc().moveToPost(e.commentId)})),P.Yc(2," \u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0432 \u043f\u043e\u0441\u0442 "),P.Vb(),P.Vb()}if(2&e){var i=P.pc(2);P.Ab(1),P.yc("variant","info-alt")("size","sm")("disabled",i.commentManipulationForm.invalid)}}function Is(e,t){if(1&e){var n=P.Xb();P.Wb(0,"div"),P.Wb(1,"jr-modal",1),P.lc("onEscape",(function(){return P.Mc(n),P.pc().closeModal()}))("onBackgroundClick",(function(){return P.Mc(n),P.pc().closeModal()})),P.Ub(2,2,3),P.Wb(4,"h5",4),P.Wc(5,Os,4,0,"ng-container",0),P.Wc(6,ys,4,0,"ng-container",0),P.Vb(),P.Tb(),P.Ub(7,5,6),P.Wb(9,"form",7),P.Wc(10,Ss,2,0,"ng-container",0),P.Wc(11,_s,2,0,"ng-container",0),P.Vb(),P.Tb(),P.Ub(12,8,9),P.Wb(14,"ul",10),P.Wb(15,"li",11),P.Wb(16,"jr-button",12),P.lc("onClick",(function(){return P.Mc(n),P.pc().closeModal()})),P.Yc(17,"\u041e\u0442\u043c\u0435\u043d\u0430"),P.Vb(),P.Vb(),P.Wc(18,Ms,3,3,"li",13),P.Wc(19,Ts,3,3,"li",13),P.Vb(),P.Tb(),P.Vb(),P.Vb()}if(2&e){var i=t.ngIf,o=P.pc();P.Ab(1),P.yc("centered",!0),P.Ab(4),P.yc("ngIf",i.commentManipulationType===o.CommentManipulationType.CONVERT_TO_POST),P.Ab(1),P.yc("ngIf",i.commentManipulationType===o.CommentManipulationType.MOVE_TO_POST),P.Ab(3),P.yc("formGroup",o.commentManipulationForm),P.Ab(1),P.yc("ngIf",i.commentManipulationType===o.CommentManipulationType.CONVERT_TO_POST),P.Ab(1),P.yc("ngIf",i.commentManipulationType===o.CommentManipulationType.MOVE_TO_POST),P.Ab(5),P.yc("variant","cancel"),P.Ab(2),P.yc("ngIf",i.commentManipulationType===o.CommentManipulationType.CONVERT_TO_POST),P.Ab(1),P.yc("ngIf",i.commentManipulationType===o.CommentManipulationType.MOVE_TO_POST)}}var Ps=function(){function e(e,t,n,i){this.logger=e,this.formBuilder=t,this.commentsAdminService=n,this.toastService=i,this.CommentManipulationType=dn,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){var e=this;this.commentManipulationModalInfo$=this.commentsAdminService.commentManipulationModalInfo$.pipe(Object(Xt.a)((function(t){t&&(e.commentManipulationForm=e.createForm(t.commentManipulationType))})))},e.prototype.createForm=function(e){switch(e){case dn.CONVERT_TO_POST:return this.formBuilder.group({forumQuestionTitle:["",Je.C.required]});case dn.MOVE_TO_POST:return this.formBuilder.group({forumQuestionKId:["",Je.C.required]});default:return this.formBuilder.group({})}},e.prototype.closeModal=function(){this.commentsAdminService.closeCommentManipulationModal()},e.prototype.convertToPost=function(e){var t=this;this.commentsAdminService.convertToPost({commentId:e,forumQuestionTitle:this.commentManipulationForm.value.forumQuestionTitle}).subscribe((function(){return t.successCommentManipulation()}))},e.prototype.moveToPost=function(e){var t=this;this.commentsAdminService.moveToPost({commentId:e,forumQuestionKId:this.commentManipulationForm.value.forumQuestionKId}).subscribe((function(){return t.successCommentManipulation()}))},e.prototype.successCommentManipulation=function(){this.toastService.showSuccess("\u0423\u0441\u043f\u0435\u0448\u043d\u043e"),this.commentManipulationForm.reset(),this.closeModal()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(Je.f),P.Qb(Jt.a),P.Qb(bn.a))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comment-manipulation-modal"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"centered","onEscape","onBackgroundClick"],["ngProjectAs","jrModalHeader",5,["jrModalHeader"]],["jrModalHeader",""],[1,"modal-title"],["ngProjectAs","jrModalBody",5,["jrModalBody"]],["jrModalBody",""],[3,"formGroup"],["ngProjectAs","jrModalFooter",5,["jrModalFooter"]],["jrModalFooter",""],[1,"actions-list","actions-list--sm","actions-list--stretched"],[1,"actions-list__item"],[3,"variant","onClick"],["class","actions-list__item",4,"ngIf"],["formControlName","forumQuestionTitle","jrAutofocusDelay","300","type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430",1,"form-control",3,"jrAutofocus"],["formControlName","forumQuestionKId","jrAutofocusDelay","300","type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ID \u043f\u043e\u0441\u0442\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430",1,"form-control",3,"jrAutofocus"],[3,"variant","size","disabled","click"]],template:function(e,t){1&e&&(P.Wc(0,Is,20,9,"div",0),P.qc(1,"async")),2&e&&P.yc("ngIf",P.rc(1,1,t.commentManipulationModalInfo$))},directives:[I.t,Cs.a,Je.E,Je.r,Je.k,at.a,Je.c,Je.q,Je.i,vs.a],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block}h3[_ngcontent-%COMP%]{margin-bottom:0}.comment-manipulation-modal-buttons[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}"],changeDetection:0}),e}();function Es(e,t){if(1&e&&P.Rb(0,"jr-comments-main-view",2),2&e){var n=P.pc();P.yc("discussion",n.discussion)("commentsMainPageData",n.commentsMainPageData)}}function ks(e,t){if(1&e&&P.Rb(0,"jr-comments-chat-view",2),2&e){var n=P.pc();P.yc("discussion",n.discussion)("commentsMainPageData",n.commentsMainPageData)}}function ws(e,t){1&e&&P.Rb(0,"jr-comment-manipulation-modal")}var As=function(){function e(e,t,n,i,o,s,c,a,r,m,u){this.logger=e,this.elementRef=t,this.pageNavigationService=n,this.statiscticService=i,this.commentsWebsocketService=o,this.commentsService=s,this.changeDetector=c,this.imageLazyLoaderService=a,this.hostElement=r,this.platformId=m,this.meProfileService=u,this.ELEMENT_ANCHOR="discussion",this.defaultOrder=w.a.CREATED_TIME_DESC,this.isDestroyed$=new R.Subject,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnChanges=function(){this.clearComments(),this.isComponentInitialized&&this.initialCommentLoad(this.defaultOrder)},e.prototype.ngOnInit=function(){var e=this;this.isModerator$=this.meProfileService.isMeModerator$,this.loadCommentsMainPageData().pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.commentsMainPageData=t,e.isCommentsImagesLazyLoadingSet||(e.prepareCommentImagesToLazyLoad(e.commentsMainPageData.comments),e.setCommentsImagesLazyLoading(e.commentsMainPageData.comments)),e.changeDetector.markForCheck()})),this.statiscticService.setCurrentCommentsBlock(this.elementRef.nativeElement),this.initialCommentLoad(this.defaultOrder),Object(I.I)(this.platformId)&&(this.isComponentInitialized=!0)},e.prototype.loadCommentsMainPageData=function(){return Object(Ie.a)(this.commentsService.comments$,this.commentsService.viewRequest$,this.commentsService.isMoreAvailable$).pipe(Object(Te.a)((function(e){var t=Object(F.f)(e,3),n=t[0],i=t[1],o=t[2],s=new Pe;return s.comments=n,s.commentsViewRequest=i,s.isMoreAvailable=o,s})))},e.prototype.initialCommentLoad=function(e){var t=this,n=new _e.a(e,10);this.commentsService.initCommentLoad(n,this.discussion).subscribe((function(){return t.setAnchorToCommentsBlock()})),this.commentsWebsocketService.initWebsocketCommentOperations(),this.commentsService.loadCommentsCount()},e.prototype.setAnchorToCommentsBlock=function(){this.pageNavigationService.addVirtualAnchor(this.ELEMENT_ANCHOR,this.elementRef.nativeElement)},e.prototype.clearComments=function(){this.commentsWebsocketService.removeAllTopicSubscriptions(),this.commentsService.clearCommentsSource(),this.pageNavigationService.removeVirtualAnchor(this.ELEMENT_ANCHOR)},e.prototype.prepareCommentImagesToLazyLoad=function(e){var t=this;e&&e.length&&e.forEach((function(e){e.message.includes("jr-image-wrap float-left")&&(e.message=t.imageLazyLoaderService.prepareImagesFromDomString(e.message)),e.childrenComments&&e.childrenComments.length&&t.prepareCommentImagesToLazyLoad(e.childrenComments)}))},e.prototype.setCommentsImagesLazyLoading=function(e){var t=this;e&&e.length&&(this.isCommentsImagesLazyLoadingSet=!0,setTimeout((function(){var e=Array.from(t.hostElement.nativeElement.querySelectorAll("img"));t.imageLazyLoaderService.registerImageLazyLoading(e,64,Ae.a.COMMENT)}),0))},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete(),this.clearComments(),this.statiscticService.setCurrentCommentsBlock(null)},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(P.l),P.Qb(ye.a),P.Qb(Se.a),P.Qb(Me.a),P.Qb(D.a),P.Qb(P.h),P.Qb(ke.a),P.Qb(P.l),P.Qb(P.C),P.Qb(we.a))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-comments-main"]],inputs:{discussion:"discussion",defaultOrder:"defaultOrder",chatView:"chatView"},features:[P.yb],decls:4,vars:5,consts:[[3,"discussion","commentsMainPageData",4,"ngIf"],[4,"ngIf"],[3,"discussion","commentsMainPageData"]],template:function(e,t){1&e&&(P.Wc(0,Es,1,2,"jr-comments-main-view",0),P.Wc(1,ks,1,2,"jr-comments-chat-view",0),P.Wc(2,ws,1,0,"jr-comment-manipulation-modal",1),P.qc(3,"async")),2&e&&(P.yc("ngIf",!t.chatView),P.Ab(1),P.yc("ngIf",t.chatView),P.Ab(1),P.yc("ngIf",P.rc(3,3,t.isModerator$)))},directives:[I.t,ss,gs,Ps],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0}),e}(),Ds=n("J9nF"),Ls=n("4i2n"),Rs=n("Jnlb"),Ns=n("+D+6"),xs=n("Wuuc"),js=function(){function e(e,t,n,i,o){this.logger=e,this.platformId=t,this.document=n,this.siteMetaDataService=i,this.eventsLoggerService=o,this.SharingSocialNetwork=Ls.a,this.facebookShareLink="https://www.facebook.com/share.php",this.linkedInShareLink="http://www.linkedin.com/shareArticle",this.twitterShareLink="https://twitter.com/share",this.subscriptionsToClose=[],this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){Object(I.I)(this.platformId)&&this.prepareSharingUrls()},e.prototype.prepareSharingUrls=function(){this.sharedUrl=this.getSharedUrl(),this.facebookShareLink="https://www.facebook.com/share.php?u="+this.sharedUrl,this.linkedInShareLink="http://www.linkedin.com/shareArticle?mini=true&url="+this.sharedUrl+"&source="+this.sharedUrl,this.twitterShareLink="https://twitter.com/share?url="+this.sharedUrl},e.prototype.openSharingWindow=function(e,t,n){t.preventDefault(),this.contentType&&this.contentKey&&this.eventsLoggerService.logEvent({type:Ns.a.SHARE,content_type:this.contentType,item_id:this.contentKey,method:n.toLowerCase()});var i=screen.height/2-175,o=screen.width/2-260;window.open(e,"sharer","top="+i+",left="+o+",toolbar=0,status=0,width=520,height=350")},e.prototype.getSharedUrl=function(){return window.location!==window.parent.location?document.referrer:document.location.href},e.prototype.ngOnDestroy=function(){this.subscriptionsToClose.forEach((function(e){return e.unsubscribe()}))},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(P.C),P.Qb(I.e),P.Qb(Ds.a),P.Qb(Rs.a))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-sharing"]],inputs:{contentType:"contentType",contentKey:"contentKey"},decls:7,vars:3,consts:[[1,"discussion-sharing"],[1,"discussion-sharing__item"],["variant","facebook","size","sm",3,"link","onClick"],["variant","linkedin","size","sm",3,"link","onClick"],["variant","twitter","size","sm",3,"link","onClick"]],template:function(e,t){1&e&&(P.Wb(0,"div",0),P.Wb(1,"div",1),P.Wb(2,"jr-social-button",2),P.lc("onClick",(function(e){return t.openSharingWindow(t.facebookShareLink,e,t.SharingSocialNetwork.FACEBOOK)})),P.Vb(),P.Vb(),P.Wb(3,"div",1),P.Wb(4,"jr-social-button",3),P.lc("onClick",(function(e){return t.openSharingWindow(t.linkedInShareLink,e,t.SharingSocialNetwork.LINKEDIN)})),P.Vb(),P.Vb(),P.Wb(5,"div",1),P.Wb(6,"jr-social-button",4),P.lc("onClick",(function(e){return t.openSharingWindow(t.twitterShareLink,e,t.SharingSocialNetwork.TWITTER)})),P.Vb(),P.Vb(),P.Vb()),2&e&&(P.Ab(2),P.yc("link",t.facebookShareLink),P.Ab(2),P.yc("link",t.linkedInShareLink),P.Ab(2),P.yc("link",t.twitterShareLink))},directives:[xs.a],styles:[".discussion-sharing[_ngcontent-%COMP%]{margin-left:-5px;margin-right:-5px}.discussion-sharing__item[_ngcontent-%COMP%]{display:inline-block;padding-left:5px;padding-right:5px}"],changeDetection:0}),e}(),Us=n("ED4h");function Vs(e,t){if(1&e){var n=P.Xb();P.Wb(0,"div",1),P.Wb(1,"jr-rating-stars",2),P.lc("onChangedStar",(function(e){return P.Mc(n),P.pc().changeRating(e)})),P.Vb(),P.Vb()}if(2&e){var i=P.pc();P.Ab(1),P.yc("rating",i.discussion.rating)("active",i.isStarsDisabled)}}var Ws=function(){function e(e,t,n,i,o,s){this.logger=e,this.meProfileService=t,this.likesService=n,this.discussionService=i,this.discussionBackendClient=o,this.changeDetector=s,this.comment=null,this.isDestroyed$=new De.a,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){var e=this;this.meProfileService.isMeAuthenticated$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){e.isStarsDisabled=t,e.changeDetector.markForCheck()})),this.comment&&(this.likesInfo=this.comment.likes)},e.prototype.changeRating=function(e){var t=this,n=null;switch(e){case 1:n=Mi.a.AWFUL;break;case 2:n=Mi.a.DISLIKE;break;case 3:n=null;break;case 4:n=mn.a.LIKE;break;case 5:n=mn.a.HOT}this.likesService.changeLikeStatus(this.discussion,this.comment,n).pipe(Object(Xt.a)((function(e){Ti.a.update(t.discussion.likes,e),t.discussionService.setCurrentDiscussionInfo(t.discussion)})),Object(N.a)((function(e){return t.discussionBackendClient.loadDiscussionInfo(t.discussion.id)})),Object(Xt.a)((function(e){E.a.update(t.discussion,e),t.changeDetector.markForCheck()}))).subscribe()},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(we.a),P.Qb(ln.a),P.Qb(L.a),P.Qb(Ii.a),P.Qb(P.h))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-stars"]],inputs:{discussion:"discussion",comment:"comment"},decls:1,vars:1,consts:[["class","rating-stars",4,"ngIf"],[1,"rating-stars"],["size","lg",3,"rating","active","onChangedStar"]],template:function(e,t){1&e&&P.Wc(0,Vs,2,2,"div",0),2&e&&P.yc("ngIf",t.discussion)},directives:[I.t,Us.a],styles:[""]}),e}();function Fs(e,t){if(1&e&&(P.Wb(0,"div",4),P.Wb(1,"div",5),P.Wb(2,"div",6),P.Rb(3,"jr-sharing",7),P.Vb(),P.Wb(4,"div",8),P.Rb(5,"jr-stars",9),P.Vb(),P.Wb(6,"div",10),P.Rb(7,"jr-likes-panel",9),P.Vb(),P.Vb(),P.Vb()),2&e){var n=P.pc().ngIf,i=P.pc();P.Ab(3),P.yc("contentType",i.contentType)("contentKey",i.contentKey),P.Ab(2),P.yc("discussion",n),P.Ab(2),P.yc("discussion",n)}}var Bs=function(e,t){return{"comments-container":e,"comments-container--chat-view":t}};function $s(e,t){if(1&e&&(P.Ub(0),P.Wc(1,Fs,8,4,"div",1),P.Wb(2,"div",2),P.Rb(3,"jr-comments-main",3),P.Vb(),P.Tb()),2&e){var n=t.ngIf,i=P.pc();P.Ab(1),P.yc("ngIf",!i.onlyComments),P.Ab(1),P.yc("ngClass",P.Ec(5,Bs,!i.chatView,i.chatView)),P.Ab(1),P.yc("discussion",n)("defaultOrder",i.defaultCommentsOrder)("chatView",i.chatView)}}var zs=function(){function e(e,t,n,i,o,s){this.logger=e,this.platformId=t,this.elementRef=n,this.discussionService=i,this.commentsService=o,this.siteCommonService=s,this.defaultCommentsOrder=w.a.CREATED_TIME_DESC,this.onCommentAdded=new P.n,this.onCommentDeleted=new P.n,this.onMessagesRead=new P.n,this.onCommentsCount=new P.n,this.isDestroyed$=new R.Subject,this.trackCommentsStatusReadInterval$=new R.Subject,this.trackCommentsStatusReadTimer$=new R.Subject,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.ngOnInit=function(){var e=this;this.currentDiscussion$=this.discussionService.currentDiscussionInfo$,this.showSubscriptionLabels&&(this.commentsService.COMMENT_PROJECTION=A.OWNER_WITH_SUBSCRIPTION),this.commentsService.commentAdding$.pipe(Object(N.a)((function(){return Object(W.of)(e.commentsService.trackReadStatus())})),Object(x.a)(this.isDestroyed$)).subscribe((function(){return e.onCommentAdded.next()})),this.commentsService.commentDeletion$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(){return e.onCommentDeleted.next()})),this.commentsService.messagesRead$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){return e.onMessagesRead.next(t)})),this.commentsService.commentsCount$.pipe(Object(x.a)(this.isDestroyed$)).subscribe((function(t){return e.onCommentsCount.next(t)})),this.deferredLoad&&(this.discussionService.setCurrentDiscussionInfo(this.inputDiscussion),this.discussionService.setDiscussionTopicInfo(this.discussionTopic),Object(I.I)(this.platformId)&&this.inputDiscussion&&(this.trackCommentsStatusRead(),this.commentsService.toggleMessagesReadStatus(!1)))},e.prototype.ngOnChanges=function(e){this.discussionService.setCurrentDiscussionInfo(this.inputDiscussion),this.discussionService.setDiscussionTopicInfo(this.discussionTopic),Object(I.I)(this.platformId)&&e.inputDiscussion&&(this.trackCommentsStatusRead(),this.commentsService.toggleMessagesReadStatus(!1))},e.prototype.trackCommentsStatusRead=function(){var e=this;this.trackCommentsStatusReadInterval$.next(),this.trackCommentsStatusReadTimer$.next(),Object(U.interval)(1e3).pipe(Object(x.a)(this.trackCommentsStatusReadInterval$)).subscribe((function(){e.siteCommonService.checkElementPositionOnScreen(e.elementRef.nativeElement,0,j.a.VISIBLE)&&(e.trackCommentsStatusReadInterval$.next(),Object(V.timer)(2e3).pipe(Object(x.a)(e.trackCommentsStatusReadTimer$)).subscribe((function(){e.commentsService.trackReadStatus()})))}))},e.prototype.ngOnDestroy=function(){this.isDestroyed$.next(),this.isDestroyed$.complete(),this.trackCommentsStatusReadInterval$.next(),this.trackCommentsStatusReadInterval$.complete(),this.trackCommentsStatusReadTimer$.next(),this.trackCommentsStatusReadTimer$.complete()},e.\u0275fac=function(t){return new(t||e)(P.Qb(k.a),P.Qb(P.C),P.Qb(P.l),P.Qb(L.a),P.Qb(D.a),P.Qb(j.b))},e.\u0275cmp=P.Kb({type:e,selectors:[["jr-discussion"]],inputs:{inputDiscussion:["discussion","inputDiscussion"],discussionTopic:"discussionTopic",onlyComments:"onlyComments",defaultCommentsOrder:"defaultCommentsOrder",showSubscriptionLabels:"showSubscriptionLabels",chatView:"chatView",deferredLoad:"deferredLoad",contentType:"contentType",contentKey:"contentKey"},outputs:{onCommentAdded:"onCommentAdded",onCommentDeleted:"onCommentDeleted",onMessagesRead:"onMessagesRead",onCommentsCount:"onCommentsCount"},features:[P.yb],decls:3,vars:3,consts:[[4,"ngIf"],["class","share-and-rating",4,"ngIf"],[3,"ngClass"],[3,"discussion","defaultOrder","chatView"],[1,"share-and-rating"],[1,"share-and-rating__container"],[1,"share-and-rating__share"],[3,"contentType","contentKey"],[1,"share-and-rating__stars"],[3,"discussion"],[1,"share-and-rating__rating"]],template:function(e,t){1&e&&(P.Wc(0,$s,4,8,"ng-container",0),P.qc(1,"async"),P.Rb(2,"jr-discussion-i18n-template")),2&e&&P.yc("ngIf",P.rc(1,1,t.currentDiscussion$))},directives:[I.t,Oe,I.q,As,js,Ws,Hi],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block;width:100%;padding-top:3px;background:transparent}.comments-container[_ngcontent-%COMP%]{max-width:760px;margin-left:auto;margin-right:auto;padding-bottom:25px}.comments-container--chat-view[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%}.share-and-rating[_ngcontent-%COMP%]{margin-bottom:30px}@media (min-width:768px){.share-and-rating[_ngcontent-%COMP%]{padding-bottom:45px}}.share-and-rating__container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}@media (min-width:820px){.share-and-rating__container[_ngcontent-%COMP%]{-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%;max-width:760px;margin-left:auto;margin-right:auto}}.share-and-rating__share[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 100%;flex:1 0 100%;text-align:center;margin-bottom:20px}.share-and-rating__rating[_ngcontent-%COMP%], .share-and-rating__stars[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 50%;flex:1 0 50%;text-align:center}@media (min-width:820px){.share-and-rating__share[_ngcontent-%COMP%]{text-align:left;margin-bottom:0}.share-and-rating__share[_ngcontent-%COMP%], .share-and-rating__stars[_ngcontent-%COMP%]{-ms-flex-preferred-size:33.3333%;flex-basis:33.3333%}.share-and-rating__stars[_ngcontent-%COMP%]{text-align:center}.share-and-rating__rating[_ngcontent-%COMP%]{-ms-flex-preferred-size:33.3333%;flex-basis:33.3333%;text-align:right}}.chat-layout[_nghost-%COMP%]   [_nghost-%COMP%], .chat-layout   [_nghost-%COMP%]   [_nghost-%COMP%]{padding-top:0}"],changeDetection:0}),e}()},bG0t:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),o=n("RAok"),s=function(e){return e.UNKNOWN="UNKNOWN",e.RESTRICTED="RESTRICTED",e.PUBLIC="PUBLIC",e.PROTECTED="PROTECTED",e.PRIVATE="PRIVATE",e.DISABLED="DISABLED",e.DELETED="DELETED",e}({});!function(e){e.values=function(){return t.map((function(e){return e.status}))},e.getVisibilityStatuses=function(){var t=[];return t.push(e.RESTRICTED,e.PUBLIC,e.PROTECTED,e.PRIVATE,e.DISABLED,e.DELETED),t},e.getDisplayName=function(e){var n=t.find((function(t){return t.status===e}));return n?n.displayName:null};var t=[];o.a.storeWasFullfilled$.subscribe((function(){t.push.apply(t,Object(i.h)([{status:e.UNKNOWN,displayName:o.a.getTranslation("visibilityStatusUnavailable")},{status:e.RESTRICTED,displayName:o.a.getTranslation("visibilityStatusRestricted")},{status:e.PUBLIC,displayName:o.a.getTranslation("visibilityStatusPublic")},{status:e.PROTECTED,displayName:o.a.getTranslation("visibilityStatusProtected")},{status:e.PRIVATE,displayName:o.a.getTranslation("visibilityStatusPrivate")},{status:e.DISABLED,displayName:o.a.getTranslation("visibilityStatusDisabled")},{status:e.DELETED,displayName:o.a.getTranslation("visibilityStatusDeprecated")}]))}))}(s||(s={}))},hDTF:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),o=n("saAp"),s=function(e){return e.UNKNOWN="UNKNOWN",e.NEW="NEW",e.ACTIVE="ACTIVE",e.SOLVED="SOLVED",e.ARCHIVE="ARCHIVE",e.DUBLICATE="DUBLICATE",e.DELETED="DELETED",e}({});!function(e){e.values=function(){return t.map((function(e){return e.value}))},e.getDisplayName=function(e){var n=t.find((function(t){return t.value===e}));return n?n.displayName:""};var t=[];o.a.storeWasFullfilled$.subscribe((function(){t.push.apply(t,Object(i.h)([{value:e.UNKNOWN,displayName:o.a.getTranslation("questionStatusUnknown")},{value:e.NEW,displayName:o.a.getTranslation("questionStatusNew")},{value:e.ACTIVE,displayName:o.a.getTranslation("questionStatusUnderDiscussion")},{value:e.SOLVED,displayName:o.a.getTranslation("questionStatusResolved")},{value:e.DUBLICATE,displayName:o.a.getTranslation("questionStatusDuplicates")},{value:e.ARCHIVE,displayName:o.a.getTranslation("questionStatusArchived")},{value:e.DELETED,displayName:o.a.getTranslation("questionStatusDeleted")}]))}))}(s||(s={}))},oF3d:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("gFDQ"),o=n("Dy+N"),s=n("cLgh"),c=n("/PH2"),a=n("oHtu"),r=n("3P9I"),m=n("U+74"),u=n("TYT/"),l=function(){function e(e,t,n,i,o){this.logger=e,this.meProfileService=t,this.websocketStompService=n,this.discussionService=i,this.commentsService=o,this.TOPIC_COMMENT_ADDED="/topic/discussion{discussionId}/comments/added",this.TOPIC_COMMENT_UPDATED="/topic/discussion{discussionId}/comments/updated",this.TOPIC_COMMENT_DELETED="/topic/discussion{discussionId}/comments/deleted",this.subscriptionsToTopics=[],this.logger.debug(this.constructor.name+" is created.")}return e.prototype.initWebsocketCommentOperations=function(){this.initCommentAdding(),this.initCommentUpdating(),this.initCommentDeleting()},e.prototype.removeAllTopicSubscriptions=function(){this.subscriptionsToTopics.forEach((function(e){return e.unsubscribe()})),this.subscriptionsToTopics=[]},e.prototype.initCommentAdding=function(){var e=this,t=this.TOPIC_COMMENT_ADDED.replace("{discussionId}",this.discussionService.getDiscussionInfo().id.toString()),n=this.websocketStompService.createSubscriptionToMessages(t,{}).pipe(Object(c.a)(this.meProfileService.getCurrentMeProfile())).subscribe((function(t){var n=a.a.of(t[0].body,t[1]);n.isUpdatedAsync=!0,e.commentsService.addComment(n)}));this.subscriptionsToTopics.push(n)},e.prototype.initCommentUpdating=function(){var e=this,t=this.TOPIC_COMMENT_UPDATED.replace("{discussionId}",this.discussionService.getDiscussionInfo().id.toString()),n=this.websocketStompService.createSubscriptionToMessages(t,{}).subscribe((function(t){e.commentsService.getCommentById(t.body.id).subscribe((function(e){e&&(e.update(t.body),e.isUpdatedAsync=!0)}))}));this.subscriptionsToTopics.push(n)},e.prototype.initCommentDeleting=function(){var e=this,t=this.TOPIC_COMMENT_DELETED.replace("{discussionId}",this.discussionService.getDiscussionInfo().id.toString()),n=this.websocketStompService.createSubscriptionToMessages(t,{}).subscribe((function(t){e.commentsService.getCommentById(t.body).subscribe((function(t){t&&e.commentsService.deleteComment(t)}))}));this.subscriptionsToTopics.push(n)},e.\u0275fac=function(t){return new(t||e)(u.hc(i.a),u.hc(o.a),u.hc(s.a),u.hc(m.a),u.hc(r.a))},e.\u0275prov=u.Mb({token:e,factory:e.\u0275fac}),e}()},oHtu:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("I7SJ"),o=function(){function e(){}return e.of=function(t,n){var i=new e;return i.id=t.id,i.message=t.message,i.time=t.time,i.owner=t.owner,i.answerTo=t.answerTo,i.parentCommentId=t.parentCommentId,i.status=t.status,i.likes=t.likes,i.attributes=t.attributes,i.visibilityStatus=t.visibilityStatus,i.childrenComments=t.childrenComments?t.childrenComments.map((function(t){return e.of(t,n)})):[],i.isMeOwner=n?n.id===t.owner.id:null,i.isErased=t.message===e.AUTHOR_ERASE_COMMENT_MESSAGE||t.message===e.MODERATOR_ERASE_COMMENT_MESSAGE,i},e.prototype.update=function(t){this.message=t.message,i.a.update(this.likes,t.likes),this.attributes=t.attributes,this.status=t.status,this.visibilityStatus=t.visibilityStatus,this.isErased=t.message===e.AUTHOR_ERASE_COMMENT_MESSAGE},e.prototype.adminUpdate=function(t){this.message=t.message,this.status=t.status,this.visibilityStatus=t.visibilityStatus,this.isErased=t.message===e.MODERATOR_ERASE_COMMENT_MESSAGE},e.AUTHOR_ERASE_COMMENT_MESSAGE="<span><i i18n='@@commentModelAuthorDelete'>/* Comment has been deleted */</i></span>",e.MODERATOR_ERASE_COMMENT_MESSAGE="<span><i i18n='@@commentModelModeratorDelete'>/* Comment has been deleted */</i></span>",e}()},qDEK:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("2WDa"),o=Object(i.j)("flyInOut",[Object(i.g)("true",Object(i.h)({})),Object(i.i)("void => true",[Object(i.h)({height:0,transform:"scale(1, 0)",opacity:0,margin:0,padding:0}),Object(i.e)("0.3s")]),Object(i.i)("true => void",[Object(i.e)("0.3s",Object(i.h)({height:0,transform:"scale(1, 0)",opacity:0,margin:0,padding:0}))])])},ryQI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("TYT/"),o=n("gFDQ"),s=function(){function e(e,t){this.logger=e,this.locale=t,this.logger.debug(this.constructor.name+" is created.")}return e.prototype.buildHrefUrl=function(e,t){for(var n=e,i="en"===this.locale?"":"/"+this.locale,o=0;o<t.length;o++)n=n.replace(t[o].key,t[o].value);return n.replace(/{lang}/,i)},e.prototype.buildRouterLinkUrl=function(e,t){for(var n=e,i=0;i<t.length;i++)n=n.replace(t[i].key,t[i].value);return n.replace(/{lang}/,"")},e.\u0275fac=function(t){return new(t||e)(i.hc(o.a),i.hc(i.v))},e.\u0275prov=i.Mb({token:e,factory:e.\u0275fac}),e}()},s34m:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.CREATED_TIME_ASC="CREATED_TIME_ASC",e.CREATED_TIME_DESC="CREATED_TIME_DESC",e.POPULAR="POPULAR",e}({})},saAp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t}(n("ZTZy").a))},wbUM:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){return function(){this.message="",this.parentCommentId=null,this.replyToComment=null}}()},zFH7:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("cUzu"),o=n("3lvd"),s=n("CQiu"),c=n("gFDQ"),a=n("TYT/"),r=function(){function e(e,t){this.logger=e,this.httpClient=t,this.DISCUSSION_URL_PATH="/discussions/discussion{discussionId}",this.DISCUSSION_LIKES_URL_PATH="/discussions/discussion{discussionId}/likes",this.DISCUSSION_COMMENTS_URL_PATH="/discussions/discussion{discussionId}/comments",this.DISCUSSION_COMMENTS_COUNT_URL_PATH="/discussions/discussion{discussionId}/comments/count",this.DISCUSSION_COMMENT_URL_PATH="/discussions/discussion{discussionId}/comments/{commentId}",this.DISCUSSION_COMMENT_LIKES_URL_PATH="/discussions/discussion{discussionId}/comments/{commentId}/likes",this.DISCUSSION_TRACK_READ_STATUS_URL_PATH="/discussions/discussion{ID}/read",this.ADMIN_DISCUSSION_COMMENT_URL_PATH="/admin/comments/comment{id}",this.ADMIN_DISCUSSION_COMMENT_DELETE_ALL_URL_PATH="/admin/comments",this.ADMIN_ADD_USER_TO_MUTED_LIST_URL_PATH="/admin/users/muted",this.ADMIN_CONVERT_TO_POST_URL_PATH="/admin/comments/convert_to_post",this.ADMIN_MOVE_TO_POST_URL_PATH="/admin/comments/move_to_post",this.UPDATE_BOOKMARKS_COMMENT_STATUS_URL_PATH="/bookmarks/comment{id}",this.UPDATE_BOOKMARKS_DISCUSSION_STATUS_URL_PATH="/bookmarks/discussion{id}",this.logger.debug(this.constructor.name+" is created.")}return e.prototype.trackReadStatus=function(e){var t=o.a.apiUrl+this.DISCUSSION_TRACK_READ_STATUS_URL_PATH.replace(/{ID}/,e.toString());return this.httpClient.post(t,{})},e.prototype.loadDiscussionInfo=function(e){var t=o.a.apiUrl+this.DISCUSSION_URL_PATH.replace("{discussionId}",e.toString());return this.httpClient.get(t)},e.prototype.voteDiscussion=function(e,t){var n=o.a.apiUrl+this.DISCUSSION_LIKES_URL_PATH.replace("{discussionId}",e.toString());return this.httpClient.post(n,t)},e.prototype.loadComments=function(e,t,n){var s=o.a.apiUrl+this.DISCUSSION_COMMENTS_URL_PATH.replace("{discussionId}",e.toString()),c=new i.g;return null!=t.order&&(c=c.set("order",t.order)),null!=t.limit&&(c=c.set("limit",t.limit.toString())),null!=t.lastTimestamp&&(c=c.set("last_time",t.lastTimestamp.toString())),null!=t.lastCommentId&&(c=c.set("last_comment_id",t.lastCommentId.toString())),null!=n&&(c=c.set("projection",n)),this.httpClient.get(s,c)},e.prototype.loadCommentsCount=function(e,t){var n=o.a.apiUrl+this.DISCUSSION_COMMENTS_COUNT_URL_PATH.replace("{discussionId}",e.toString()),s=new i.g;return s=s.set("firstLevelOnly",t?"true":"false"),this.httpClient.get(n,s)},e.prototype.loadComment=function(e,t,n){var s=o.a.apiUrl+this.DISCUSSION_COMMENT_URL_PATH.replace("{discussionId}",e.toString()).replace("{commentId}",t.toString()),c=new i.g;return null!=n&&(c=c.set("projection",n)),this.httpClient.get(s,c)},e.prototype.addComment=function(e,t,n){var s=o.a.apiUrl+this.DISCUSSION_COMMENTS_URL_PATH.replace("{discussionId}",e.toString()),c=new i.g;return null!=n&&(c=c.set("projection",n)),this.httpClient.post(s,t,c)},e.prototype.editComment=function(e,t,n){var s=o.a.apiUrl+this.DISCUSSION_COMMENT_URL_PATH.replace("{discussionId}",e.toString()).replace("{commentId}",t.id.toString()),c=new i.g;return null!=n&&(c=c.set("projection",n)),this.httpClient.post(s,t,c)},e.prototype.deleteComment=function(e,t){var n=o.a.apiUrl+this.DISCUSSION_COMMENT_URL_PATH.replace("{discussionId}",e.toString()).replace("{commentId}",t.toString());return this.httpClient.delete(n)},e.prototype.voteComment=function(e,t,n){var i=o.a.apiUrl+this.DISCUSSION_COMMENT_LIKES_URL_PATH.replace("{discussionId}",e.toString()).replace("{commentId}",t.toString());return this.httpClient.post(i,n)},e.prototype.addUserToMutedList=function(e){return this.httpClient.post(o.a.apiUrl+this.ADMIN_ADD_USER_TO_MUTED_LIST_URL_PATH,e)},e.prototype.adminUpdateComment=function(e,t){var n=o.a.apiUrl+this.ADMIN_DISCUSSION_COMMENT_URL_PATH.replace("{id}",e.toString());return this.httpClient.post(n,t)},e.prototype.adminDeleteComment=function(e){var t=o.a.apiUrl+this.ADMIN_DISCUSSION_COMMENT_URL_PATH.replace("{id}",e.toString());return this.httpClient.delete(t)},e.prototype.deleteAllUserComments=function(e,t,n){var s=o.a.apiUrl+this.ADMIN_DISCUSSION_COMMENT_DELETE_ALL_URL_PATH,c=new i.g;return null!=e&&(c=c.set("id",e.toString())),null!=t&&(c=c.set("eraseMessage",t)),null!=n&&(c=c.set("days",n.toString())),this.httpClient.delete(s,null,c)},e.prototype.updateBookmarksCommentStatus=function(e){var t=o.a.apiUrl+this.UPDATE_BOOKMARKS_COMMENT_STATUS_URL_PATH.replace("{id}",e.toString());return this.httpClient.post(t,{})},e.prototype.updateBookmarksDiscussionStatus=function(e){var t=o.a.apiUrl+this.UPDATE_BOOKMARKS_DISCUSSION_STATUS_URL_PATH.replace("{id}",e.toString());return this.httpClient.post(t,{})},e.prototype.convertToPost=function(e){return this.httpClient.post(o.a.apiUrl+this.ADMIN_CONVERT_TO_POST_URL_PATH,e)},e.prototype.moveToPost=function(e){return this.httpClient.post(o.a.apiUrl+this.ADMIN_MOVE_TO_POST_URL_PATH,e)},e.\u0275fac=function(t){return new(t||e)(a.hc(c.a),a.hc(s.a))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac}),e}()}}]);